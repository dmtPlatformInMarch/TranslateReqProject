(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{495:function(e,t,o){var content=o(503);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(10).default)("706a0d76",content,!0,{sourceMap:!1})},502:function(e,t,o){"use strict";o(495)},503:function(e,t,o){var n=o(9)(!1);n.push([e.i,".video__box[data-v-066f6fd4]{max-width:920px}.video__player[data-v-066f6fd4]{width:100%}",""]),e.exports=n},505:function(e,t,o){"use strict";var n={props:{url:{type:String,default:""}},data:function(){return{video:"",tracks:[]}},computed:{temp:function(){return"https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/tracks/".concat(encodeURI(this.$store.state.videoes.fileName),".vtt")}},mounted:function(){this.video=document.querySelector("video"),this.tracks=this.video.textTracks},methods:{}},r=(o(502),o(18)),component=Object(r.a)(n,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"video__box"},[o("video",{staticClass:"video__player",attrs:{controls:"",preload:"auto",src:e.url,crossorigin:"use-credentials"}},[o("track",{attrs:{kind:"subtitles",src:e.temp,srclang:"en",label:"영어",default:""}})])])}),[],!1,null,"066f6fd4",null);t.a=component.exports},522:function(e,t,o){var content=o(590);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(10).default)("d5e9c590",content,!0,{sourceMap:!1})},523:function(e,t,o){var content=o(592);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(10).default)("a070c388",content,!0,{sourceMap:!1})},589:function(e,t,o){"use strict";o(522)},590:function(e,t,o){var n=o(9)(!1);n.push([e.i,".track__wrapper[data-v-7b653b98]{display:flex;flex-direction:column;height:15%;border:1px solid grey;margin:5px;padding:0 10px;flex-basis:6rem;justify-content:center}.track__time[data-v-7b653b98]{padding:5px}.track__text[data-v-7b653b98]{display:flex;flex-direction:column;justify-content:center;padding:0 5px;margin:5px;border:1px solid #000}",""]),e.exports=n},591:function(e,t,o){"use strict";o(523)},592:function(e,t,o){var n=o(9)(!1);n.push([e.i,".video__box[data-v-27505ecc]{overflow:scroll;height:calc(100% - 12px)}.video__box[data-v-27505ecc]::-webkit-scrollbar{display:block;width:10px;height:8px}.video__box[data-v-27505ecc]::-webkit-scrollbar-track{background-color:transparent}.video__box[data-v-27505ecc]::-webkit-scrollbar-thumb{border-radius:5px;background:#2172ff}.video__player[data-v-27505ecc]{width:auto;height:50%;min-height:625px;border:1px solid red}.video__player__grid[data-v-27505ecc]{height:100%;min-height:625px}.video__player__box[data-v-27505ecc],.video__player__meta[data-v-27505ecc]{display:flex;align-items:center;justify-content:center;margin:25px 15px}.video__player__meta[data-v-27505ecc],.video__translator[data-v-27505ecc]{flex-direction:column}.video__translator[data-v-27505ecc]{display:flex;min-height:calc(50% - 128px);border:1px solid red}.video__translator__title[data-v-27505ecc]{display:flex;align-items:center;margin:15px;padding:0 15px}.video__translator__content[data-v-27505ecc]{display:flex;flex-direction:column;margin:0 15px 15px;border:1px solid red}.video__uploadFile[data-v-27505ecc]{width:100%;padding:0 50px}.video[data-v-27505ecc]{padding:25px}",""]),e.exports=n},615:function(e,t,o){"use strict";o.r(t);var n=o(460),r=o(488),c=o(512),d=o(188),l=o(487),v=o(469),_=o(6),f=(o(44),o(23),o(505)),x=(o(60),{props:{start:{type:String,default:"00:00.000"},end:{type:String,default:"00:00.000"},text:{type:String,default:""}},data:function(){return{}},computed:{segmentStart:function(){return this.msToString(this.start)},segmentEnd:function(){return this.msToString(this.end)},segmentText:function(){return this.text.split("\\n")}},methods:{msToString:function(time){if(0===time)return"00:00.000";var e=time/6e4>=1?parseInt(time/6e4):0,t=e>=1?time%6e4/.6/1e3>=1?parseInt(time%6e4/.6/1e3):0:time/1e3>=1?parseInt(time/1e3):0,o=e>=1?parseInt(time%6e4/.6%100):time/1e3>=1?time%1e3:time,n=e/10>=1?e:"0".concat(e),r=t/10>=1?t:"0".concat(t),c=o/100>=1?o:o/10>=1?"0".concat(o):"00".concat(o);return"".concat(n," : ").concat(r,".").concat(c)}}}),h=(o(589),o(18)),m=Object(h.a)(x,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"track__wrapper"},[o("div",{staticClass:"track__time"},[o("h3",[e._v(e._s(e.start)+" --\x3e "+e._s(e.end))])]),e._v(" "),o("div",{staticClass:"track__text"},[o("p",[e._l(e.segmentText,(function(t,n){return[e._v("\n                "+e._s(t)+" "),o("br",{key:n})]}))],2)])])}),[],!1,null,"7b653b98",null).exports,k={layout:"VideoLayout",components:{VideoComponent:f.a,TrackComponent:m},data:function(){return{readToVideo:!1,videoTrack:[]}},created:function(){var e=this;this.$nuxt.$on("onVideoEvent",(function(t){e.readToVideo=!0,e.videoTrack=[],e.$store.commit("videoes/setFileURL","https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/videoes/".concat(encodeURI(t)))})),this.$nuxt.$on("onScrollTop",(function(){e.$refs.videobox.scrollBy({top:-e.$refs.videobox.scrollTop,behavior:"smooth"})}))},computed:{language:function(){return this.$store.state.manager.language},fileURL:function(){return this.$store.state.videoes.fileURL}},methods:{extToContentType:function(e){switch(e){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":case"ogv":case"ogm":return"video/ogg";default:return"application/oct-stream"}},onChange:function(e){var t=this;return Object(_.a)(regeneratorRuntime.mark((function o(){var n,r,c,d,l;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(n=new FormData,null==e){o.next=29;break}return o.prev=2,r=e.name.substring(e.name.lastIndexOf(".")+1),c=e.name.substring(0,e.name.lastIndexOf(".")),t.$store.commit("videoes/setFileName",c),n.append("fileKey",e),o.next=9,t.$store.dispatch("videoes/signedURL",n);case 9:return d=o.sent,t.$nuxt.$loading.start(),o.next=13,fetch(new Request(d,{method:"PUT",headers:{"Content-Type":t.extToContentType(r)},body:e}));case 13:if(l=o.sent,t.$nuxt.$loading.finish(),200!==l.status){o.next=20;break}t.$store.dispatch("videoes/setURL").then((function(){t.readToVideo=!0,t.$store.dispatch("videoes/getFiles")})),console.log("Upload Success"),o.next=22;break;case 20:return console.log("Upload Error"),o.abrupt("return");case 22:o.next=27;break;case 24:o.prev=24,o.t0=o.catch(2),console.log(o.t0);case 27:o.next=30;break;case 29:console.log("e is null");case 30:case"end":return o.stop()}}),o,null,[[2,24]])})))()},getTrack:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("videoes/loadTrack");case 3:o=t.sent,e.videoTrack=o.segment,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},onEmptyFile:function(){this.readToVideo=!this.readToVideo,this.videoTrack=[]},onClearFile:function(){this.$store.dispatch("videoes/deleteFile"),this.$store.commit("videoes/setFileURL",""),this.$refs.fileupload.internalValue=null,this.readToVideo=!1}}},y=(o(591),Object(h.a)(k,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"videobox",staticClass:"video__box"},[o("div",[o(c.a,{ref:"fileupload",attrs:{label:"업로드 영상"},on:{change:function(t){return e.onChange(t)}}})],1),e._v(" "),o("div",{staticClass:"video__player"},[o(l.a,{staticClass:"video__player__grid",attrs:{"no-gutters":""}},[o(r.a,{staticClass:"video__player__box",attrs:{cols:"8"}},[0!=this.readToVideo?o("div",{staticClass:"video"},[o("video-component",{attrs:{url:this.fileURL}})],1):o("div",[e._v("\n                    비어있음\n                ")])]),e._v(" "),o(r.a,{staticClass:"video__player__meta"},[o(n.a,{attrs:{color:"warning",elevation:"0",block:"",disabled:!this.readToVideo},on:{click:e.onEmptyFile}},[o(d.a,[e._v("\n                        mdi-trash-can\n                    ")]),e._v("\n                    영상 비우기\n                ")],1),e._v(" "),o(n.a,{attrs:{color:"error",elevation:"0",block:"",disabled:!this.readToVideo},on:{click:e.onClearFile}},[o(d.a,[e._v("\n                        mdi-close\n                    ")]),e._v("\n                    영상 삭제\n                ")],1)],1)],1)],1),e._v(" "),o("div",{staticClass:"video__translator"},[o("div",{staticClass:"video__translator__title"},[o("h1",[e._v("자막")]),e._v(" "),o(v.a),e._v(" "),o(n.a,{attrs:{color:"#013183",depressed:"",tile:"",dark:"",disabled:!this.readToVideo},on:{click:e.getTrack}},[e._v("자막 가져오기")])],1),e._v(" "),e._l(e.videoTrack,(function(tr,e){return o("div",{key:e,staticClass:"video__translator__content"},[o("track-component",{attrs:{start:tr.start,end:tr.end,text:tr.text}})],1)}))],2)])}),[],!1,null,"27505ecc",null));t.default=y.exports}}]);