(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{509:function(t,e,n){var content=n(530);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("55306d3e",content,!0,{sourceMap:!1})},529:function(t,e,n){"use strict";n(509)},530:function(t,e,n){var r=n(9)(!1);r.push([t.i,".track__wrapper[data-v-4733c45b]{height:128px;display:flex;border:1px solid grey;margin:5px;padding:0 10px;flex-basis:4rem;justify-content:center}.track__time[data-v-4733c45b]{display:flex;align-items:center;justify-content:space-around;padding:5px;width:25%}.input__time[data-v-4733c45b]{width:80%;flex:0 0 auto!important}.input__time[data-v-4733c45b] input{text-align:center}.edit__time[data-v-4733c45b]{width:10%;display:flex;align-items:center;justify-content:center}.track__text[data-v-4733c45b],.track__trans__text[data-v-4733c45b]{display:flex;align-items:center;justify-content:space-around;padding:5px;width:35%}",""]),t.exports=r},535:function(t,e,n){"use strict";var r=n(466),o=n(188),c=n(463),d=n(520),l=(n(18),n(59),{props:{idx:{type:Number,require:!0},start:{type:String,default:"00:00:00.000"},end:{type:String,default:"00:00:00.000"},text:{type:String,default:""},trans:{type:String,default:""}},data:function(){return{editTime:!0,timeRule:[function(t){return/(((\d\d:\d\d)|(\d\d)):\d\d.\d\d\d) --> (((\d\d:\d\d)|(\d\d)):\d\d.\d\d\d)/.test(t)||"형식이 맞지 않습니다."}]}},computed:{segmentText:function(){return this.text.split("\\n")},segmentTrans:function(){return this.trans.split("\\n")}},methods:{msToString:function(time){if(0===time)return"00:00:00.000";var t=time/36e5>=1?parseInt(time/36e5):0,e=time/6e4>=1?time/6e4>=60?parseInt(time/6e4)-60>=1?parseInt(time/6e4)-60:0:parseInt(time/6e4):0,n=time%6e4>=1?parseInt(time%6e4/1e3)>=1?parseInt(time%6e4/1e3):0:parseInt(time/1e3)>=1?parseInt(time/1e3):0,r=time%1e3,o=t/10>=1?t:"0".concat(t),c=e/10>=1?e:"0".concat(e),d=n/10>=1?n:"0".concat(n),l=r/100>=1?r:r/10>=1?"0".concat(r):"00".concat(r);return"".concat(o,":").concat(c,":").concat(d,".").concat(l)},changeTime:function(t){this.$nuxt.$emit("timeChange",t,this.idx)},changeText:function(t){this.$nuxt.$emit("textChange",t,this.idx)},changeTrans:function(t){this.$nuxt.$emit("transChange",t,this.idx)},timeEdit:function(){this.editTime=!this.editTime,this.editTime||this.$refs.inputTime.focus()}}}),_=(n(529),n(16)),component=Object(_.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"track__wrapper"},[n("div",{staticClass:"track__time"},[n(c.a,{ref:"inputTime",staticClass:"input__time",attrs:{value:t.start+" --\x3e "+t.end,outlined:"",dense:"","hide-details":"auto",readonly:t.editTime,rules:t.timeRule},on:{input:function(e){return t.changeTime(e)}}}),t._v(" "),n("div",{staticClass:"edit__time"},[n(r.a,{attrs:{icon:""},on:{click:t.timeEdit}},[n(o.a,[t._v("\n                    mdi-timer-edit\n                ")])],1)],1)],1),t._v(" "),n("div",{staticClass:"track__text"},[n(d.a,{attrs:{value:t.segmentText,outlined:"",dense:"",rows:"3","row-height":"20","hide-details":""},on:{input:function(e){return t.changeText(e)}}})],1),t._v(" "),n("div",{staticClass:"track__trans__text"},[n(d.a,{attrs:{value:t.segmentTrans,outlined:"",dense:"",rows:"3","row-height":"20","hide-details":""},on:{input:function(e){return t.changeTrans(e)}}})],1)])}),[],!1,null,"4733c45b",null);e.a=component.exports},557:function(t,e,n){var content=n(635);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("3c6ac292",content,!0,{sourceMap:!1})},634:function(t,e,n){"use strict";n(557)},635:function(t,e,n){var r=n(9)(!1);r.push([t.i,".wrapper[data-v-0ae1954a]{width:100%;height:100%}.video__box[data-v-0ae1954a]{position:absolute;left:0;width:25%;height:100%;border-right:1px solid #8c867a}.video__player[data-v-0ae1954a]{display:flex;align-items:center;justify-content:center;width:100%;height:35%;background:#000}.player[data-v-0ae1954a]{width:100%;height:100%}.video__action[data-v-0ae1954a]{display:flex;align-items:center;justify-content:space-around;width:100%;height:5%}.video__action__btn[data-v-0ae1954a]{width:45%}.video__list[data-v-0ae1954a]{width:100%;height:60%}.video__list[data-v-0ae1954a],.video__list__group[data-v-0ae1954a]{position:absolute;bottom:0}.video__list__content[data-v-0ae1954a]{height:50vh}.list__content__disabled[data-v-0ae1954a]{display:flex;width:100%;height:100%;align-items:center;justify-content:center;text-align:center}.content__list__title[data-v-0ae1954a]{display:flex;align-items:center;justify-content:flex-start}.content__list__btn[data-v-0ae1954a]{flex:1 1 0;justify-content:flex-start!important}.content__list__btn[data-v-0ae1954a] span{width:100%;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}.track__box[data-v-0ae1954a]{display:flex;position:absolute;left:25%;align-items:center;justify-content:center;width:75%;height:100%}.track__box__scroll[data-v-0ae1954a]{display:flex;flex-direction:column}.track__box__scroll[data-v-0ae1954a]::-webkit-scrollbar{display:block;width:10px;height:8px}.track__box__scroll[data-v-0ae1954a]::-webkit-scrollbar-track{background-color:transparent}.track__box__scroll[data-v-0ae1954a]::-webkit-scrollbar-thumb{border-radius:5px;background:#2172ff}.track__box__wrapper[data-v-0ae1954a]{width:95%;align-items:center;justify-content:center}.track__box[data-v-0ae1954a] .v-virtual-scroll__item{display:flex;align-items:center;justify-content:center}",""]),t.exports=r},665:function(t,e,n){"use strict";n.r(e);var r=n(466),o=n(584),c=n(586),d=n(585),l=n(583),_=n(188),f=n(627),h=(n(12),n(8),n(11),n(13),n(14),n(6)),v=n(1),m=(n(45),n(23),n(535)),x=n(118),k=n.n(x);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function w(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(v.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var T={layout:"ServiceLayout",components:{TrackComponent:m.a},created:function(){var t=this;!0===this.readyToTrack&&"undefined"!=typeof window&&window.addEventListener("resize",(function(){t.virtualHeight=t.$refs.trackBox.offsetHeight})),this.$nuxt.$on("onScrollTop",(function(){t.$refs.trackscroll.$el.scrollBy({top:-t.$refs.trackscroll.scrollTop,behavior:"smooth"})}))},data:function(){return{url:"https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/videoes/360p_20%EB%B6%8448%EC%B4%88.mp4",virtualHeight:0,readToVideo:!1,readyToTrack:!1,dialog:!1,fullTrack:[],timeLine:[],originalTrack:[],transTrack:[],track:"",transtrack:""}},mounted:function(){this.$store.dispatch("videoes/getFiles"),this.virtualHeight=this.$refs.trackBox.offsetHeight},computed:{templist:function(){for(var t=[],i=0;i<1e3;i++)t[i]=i+1;return t},videoList:function(){return this.$store.state.videoes.files},videoURL:function(){return this.$store.state.videoes.fileURL}},methods:{uploadVideo:function(){this.$refs.upload.click()},extToContentType:function(t){switch(t){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":case"ogv":case"ogm":return"video/ogg";default:return"application/oct-stream"}},sliceName:function(t){return t.substring(t.lastIndexOf("/")+1)},trackMerge:function(){for(var t=[],i=0;i<Math.max(this.timeLine.length,this.originalTrack.length);i++)t[i]=w(w({},this.timeLine[i]),{text:this.originalTrack[i]});this.fullTrack=t},onChange:function(t){var e=this;return Object(h.a)(regeneratorRuntime.mark((function n(){var r,o,c,d,l,_,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.originalTrack="",e.transTrack="",null==t||0==t.target.files.length){n.next=32;break}return r=t.target.files[0],o=r.name,c=new FormData,d=o.substring(0,o.lastIndexOf(".")),l=o.substring(o.lastIndexOf(".")+1),e.$store.commit("videoes/setFileName",d),e.$store.commit("videoes/setFileExt",l),c.append("fileKey",r),n.prev=11,e.$nuxt.$loading.start(),n.next=15,e.$store.dispatch("videoes/signedURL",c);case 15:return _=n.sent,e.$nuxt.$loading.finish(),e.$nuxt.$loading.start(),n.next=20,k.a.put(_,r,{headers:{"Content-Type":e.extToContentType(l)},onUploadProgress:function(t){var e=100*t.loaded/t.total;Math.round(e);console.log(t.loaded+" / "+t.total,e)}});case 20:f=n.sent,e.$nuxt.$loading.finish(),e.readToVideo=!0,200===f.status?e.$store.dispatch("videoes/setURL").then(Object(h.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.time("Recognition Time"),e.$nuxt.$loading.start(),t.next=4,e.$store.dispatch("videoes/postVideo");case 4:n=t.sent,e.$nuxt.$loading.finish(),console.timeEnd("Recognition Time"),e.track=n.track,e.originalTrack=n.segment,e.timeLine=n.timeline,console.log("Merge"),e.trackMerge(),e.$store.dispatch("videoes/getFiles"),e.readyToTrack=!0;case 14:case"end":return t.stop()}}),t)})))):e.$menage.showMessage({message:"영상 업로드에 실패했습니다.\n관리자에게 문의하세요.",color:"error"}),n.next=30;break;case 26:n.prev=26,n.t0=n.catch(11),e.$nuxt.$loading.finish(),console.log(n.t0);case 30:n.next=33;break;case 32:console.log("e is null");case 33:case"end":return n.stop()}}),n,null,[[11,26]])})))()},newVideo:function(){this.readToVideo=!1,this.readyToTrack=!1,this.timeLine=[],this.originalTrack=[],this.transTrack=[],this.track="",this.transtrack="",this.$refs.upload.click()}}},$=(n(634),n(16)),component=Object($.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"video__box"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"upload",attrs:{type:"file"},on:{change:t.onChange}}),t._v(" "),!0===t.readToVideo?n("div",{staticClass:"video__player"},[n("video",{staticClass:"player",attrs:{src:t.videoURL,controls:"",preload:"auto"}})]):n("div",{staticClass:"video__player"},[n(r.a,{attrs:{rounded:""},on:{click:t.uploadVideo}},[n(_.a,[t._v("\n                    mdi-plus\n                ")]),t._v("\n                새로만들기\n            ")],1)],1),t._v(" "),n("div",{staticClass:"video__action"},[n(r.a,{staticClass:"video__action__btn",attrs:{rounded:"",color:"#013183",dark:""},on:{click:t.newVideo}},[t._v("\n                새 영상\n            ")]),t._v(" "),n(r.a,{staticClass:"video__action__btn",attrs:{rounded:"",color:"#013183",dark:""},on:{click:function(e){t.readyToTrack=!t.readyToTrack}}},[t._v("\n                다운로드\n            ")])],1),t._v(" "),n("div",{staticClass:"video__list"},[n(l.a,{staticClass:"video__list__group",attrs:{tile:"",dark:""}},[n(o.a,[n(d.a,{attrs:{color:"#013183"}},[t._v("\n                        파일 목록\n                    ")]),t._v(" "),n(c.a,{staticClass:"video__list__content"},[n("div",{staticClass:"list__content__disabled"},[t._v("\n                            로그인 후"),n("br"),t._v(" 이용가능 합니다.\n                        ")])])],1)],1)],1)]),t._v(" "),n("div",{ref:"trackBox",staticClass:"track__box"},[t.readyToTrack?n(f.a,{ref:"trackscroll",staticClass:"track__box__scroll",attrs:{bench:"15",items:t.fullTrack,height:t.virtualHeight,"item-height":"156"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item,o=e.index;return[n("div",{staticClass:"track__box__wrapper"},[n("track-component",{attrs:{start:r.start,end:r.end,text:r.text,trans:t.transTrack[o],idx:o}})],1)]}}],null,!1,3315004982)}):n("div",[t._v("\n            영상을 추가하면 자막을 편집하실 수 있습니다. "),n("br")])],1)])}),[],!1,null,"0ae1954a",null);e.default=component.exports}}]);