(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{547:function(t,e,n){var content=n(625);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("48199f14",content,!0,{sourceMap:!1})},548:function(t,e,n){var content=n(627);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(10).default)("7f0856f6",content,!0,{sourceMap:!1})},624:function(t,e,n){"use strict";n(547)},625:function(t,e,n){var r=n(9)(!1);r.push([t.i,".track__style[data-v-76298e36]{height:156px;display:flex;border:1px solid grey;border-radius:25px;margin:5px;padding:0 10px;justify-content:center;align-items:center;flex-direction:column}.add__btn[data-v-76298e36]{display:flex;width:100%;height:20%;margin:5px 0}.add__btn__style[data-v-76298e36]{display:flex;height:100%!important;background-color:#e1e1e1!important}.track__wrapper[data-v-76298e36]{width:100%;height:80%;justify-content:center}.track__time[data-v-76298e36],.track__wrapper[data-v-76298e36]{display:flex;align-items:center}.track__time[data-v-76298e36]{justify-content:space-around;padding:5px;width:25%}.input__time[data-v-76298e36]{width:80%;flex:0 0 auto!important}.input__time[data-v-76298e36] input{text-align:center}.edit__time[data-v-76298e36]{width:10%;display:flex;align-items:center;justify-content:center}.track__text[data-v-76298e36],.track__trans__text[data-v-76298e36]{display:flex;align-items:center;justify-content:space-around;padding:5px;width:35%}",""]),t.exports=r},626:function(t,e,n){"use strict";n(548)},627:function(t,e,n){var r=n(9)(!1);r.push([t.i,'.non-flex[data-v-a8c7139e]{flex:0 0 auto}.auto-flex[data-v-a8c7139e]{flex:1 1 auto}.readonly__btn[data-v-a8c7139e]{opacity:1!important}.wrapper[data-v-a8c7139e]{width:100%;height:100%}.video__box[data-v-a8c7139e]{position:absolute;left:0;width:25%;height:100%;border-right:1px solid #8c867a}.video__player[data-v-a8c7139e]{display:flex;align-items:center;justify-content:center;width:100%;height:35%;background:#000}.player[data-v-a8c7139e]{width:100%;height:100%}.video__action[data-v-a8c7139e]{display:flex;align-items:center;justify-content:space-around;width:100%;height:5%}.video__action__btn[data-v-a8c7139e]{width:45%}.video__list[data-v-a8c7139e]{width:100%;height:60%}.video__list[data-v-a8c7139e],.video__list__group[data-v-a8c7139e]{position:absolute;bottom:0}.video__list__content[data-v-a8c7139e]{height:50vh}.list__content__disabled[data-v-a8c7139e]{display:flex;width:100%;height:100%;align-items:center;justify-content:center;text-align:center}.content__list__title[data-v-a8c7139e]{display:flex;align-items:center;justify-content:flex-start}.content__list__btn[data-v-a8c7139e]{flex:1 1 0;justify-content:flex-start!important}.content__list__btn[data-v-a8c7139e] span{width:100%}.list__btn__label[data-v-a8c7139e]{max-width:80%;overflow:hidden;text-overflow:ellipsis}.track__box[data-v-a8c7139e]{display:flex;position:absolute;left:25%;align-items:center;justify-content:center;width:75%;height:100%}.track__wrapper[data-v-a8c7139e]{width:100%;height:100%}.track__box__scroll[data-v-a8c7139e]{display:flex;flex-direction:column}.track__box__scroll[data-v-a8c7139e]::-webkit-scrollbar{display:block;width:10px;height:8px}.track__box__scroll[data-v-a8c7139e]::-webkit-scrollbar-track{background-color:transparent}.track__box__scroll[data-v-a8c7139e]::-webkit-scrollbar-thumb{border-radius:5px;background:#2172ff}.track__box__wrapper[data-v-a8c7139e]{width:95%;align-items:center;justify-content:center}.track__box[data-v-a8c7139e] .v-virtual-scroll__item{display:flex;align-items:center;justify-content:center}.dialog__card[data-v-a8c7139e]{width:75vw}.dialog__box[data-v-a8c7139e]{flex-direction:column;text-align:center;height:50vh;padding:25px}.dialog__box[data-v-a8c7139e],.dialog__box__setting[data-v-a8c7139e]{display:flex;align-items:center;justify-content:center;width:100%}.dialog__box__setting[data-v-a8c7139e]{height:90%}.setting__select__box[data-v-a8c7139e]{display:flex;flex-direction:column;align-items:center;justify-content:space-around;width:50%;height:100%}.img[data-v-a8c7139e]{flex:0 0 auto}.dialog__box__process[data-v-a8c7139e]{flex-direction:column;width:50%;height:100%}.dialog__box__loading[data-v-a8c7139e],.dialog__box__process[data-v-a8c7139e]{display:flex;align-items:center;justify-content:center}.dialog__box__loading[data-v-a8c7139e]{width:100%;height:10%}.download__card[data-v-a8c7139e]{flex-direction:column;height:50vh}.download__card[data-v-a8c7139e],.download__card__title[data-v-a8c7139e]{display:flex;align-items:center;justify-content:center}.download__card__title[data-v-a8c7139e]{width:100%;background:#013183;color:#fff}.download__card__content[data-v-a8c7139e]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:100%;height:90%;padding:25px}.card__content__btngroup[data-v-a8c7139e]{display:flex;align-items:center;justify-content:space-around;width:100%;height:60%}.card__content__btn[data-v-a8c7139e]{display:flex;flex-direction:column;align-items:center;justify-content:center;border:3px dashed grey;border-radius:10%;width:45%;height:100%;opacity:.6;transition:.3s}.card__content__btn[data-v-a8c7139e]:hover{border:15px solid #2172ff!important;background-color:#2172ff!important;opacity:1!important;cursor:pointer}.card__content__text[data-v-a8c7139e]{display:flex;align-items:center;justify-content:space-around;width:100%;height:30%}.card__action[data-v-a8c7139e]{justify-content:center;width:100%;height:10%}.select__box[data-v-a8c7139e]{height:90%}.action__box[data-v-a8c7139e],.select__box[data-v-a8c7139e]{display:flex;justify-content:space-around;width:100%;padding:25px}.action__box[data-v-a8c7139e]{align-items:center;height:10%}.list__wrapper[data-v-a8c7139e]{width:100%;height:80%}.header__class[data-v-a8c7139e]{border-bottom:3px solid green}.list__select[data-v-a8c7139e]{border:solid #013183!important;color:#013183!important}.process__stepper[data-v-a8c7139e]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%}.stepper[data-v-a8c7139e]{width:50%;padding:5%}.stepper__btn[data-v-a8c7139e]{border:3px solid #013183}.arrow__wrapper[data-v-a8c7139e]{display:flex;width:100%;height:100%;flex-direction:column;align-items:center;justify-content:center}.arrow[data-v-a8c7139e]{color:#2172ff;-webkit-animation:arrowAnimation-data-v-a8c7139e 1.5s ease infinite;animation:arrowAnimation-data-v-a8c7139e 1.5s ease infinite;-webkit-animation-fill-mode:both;animation-fill-mode:both}.arrow[data-v-a8c7139e]:first-child{-webkit-animation-delay:.75s;animation-delay:.75s}.arrow[data-v-a8c7139e]:nth-child(2){-webkit-animation-delay:1s;animation-delay:1s}.arrow[data-v-a8c7139e]:nth-child(3){-webkit-animation-delay:1.25s;animation-delay:1.25s}.hr-sect[data-v-a8c7139e]{display:flex;align-items:center;color:rgba(0,0,0,.35);font-size:12px;width:100%;height:5%}.hr-sect[data-v-a8c7139e]:after,.hr-sect[data-v-a8c7139e]:before{content:"";flex-grow:1;background:rgba(0,0,0,.35);height:1px;font-size:0;line-height:0;margin:0 16px}@-webkit-keyframes arrowAnimation-data-v-a8c7139e{0%{color:#fff}to{color:#2172ff}}@keyframes arrowAnimation-data-v-a8c7139e{0%{color:#fff}to{color:#2172ff}}',""]),t.exports=r},657:function(t,e,n){"use strict";n.r(e);var r=n(472),o=n(192),c=n(68),l=n(485),d=n(597),_=n(599),v=n(598),h=n(596),f=n(189),m=n(158),x=n(188),k=n(119),w=n(191),y=n(3),T=n(193),C=n(481),$=n(49),F=n(58),S=n(653),O=(n(8),n(11),n(13),n(14),n(1)),j=n(6),I=(n(50),n(28),n(12),n(59),n(60),n(23),n(44),n(469)),R=n(535),D=(n(18),{props:{idx:{type:Number,require:!0},start:{type:String,default:"00:00:00.000"},end:{type:String,default:"00:00:00.000"},text:{type:String,default:""},trans:{type:String,default:""}},data:function(){return{editTime:!0,timeRule:[function(t){return/(((\d\d:\d\d)|(\d\d)):\d\d.\d\d\d) --> (((\d\d:\d\d)|(\d\d)):\d\d.\d\d\d)/.test(t)||"형식이 맞지 않습니다."}]}},computed:{segmentText:function(){return this.text.split("\\n")},segmentTrans:function(){return this.trans.split("\\n")}},methods:{msToString:function(time){if(0===time)return"00:00:00.000";var t=time/36e5>=1?parseInt(time/36e5):0,e=time/6e4>=1?time/6e4>=60?parseInt(time/6e4)-60>=1?parseInt(time/6e4)-60:0:parseInt(time/6e4):0,n=time%6e4>=1?parseInt(time%6e4/1e3)>=1?parseInt(time%6e4/1e3):0:parseInt(time/1e3)>=1?parseInt(time/1e3):0,r=time%1e3,o=t/10>=1?t:"0".concat(t),c=e/10>=1?e:"0".concat(e),l=n/10>=1?n:"0".concat(n),d=r/100>=1?r:r/10>=1?"0".concat(r):"00".concat(r);return"".concat(o,":").concat(c,":").concat(l,".").concat(d)},changeTime:function(t){this.$nuxt.$emit("timeChange",t,this.idx)},changeText:function(t){this.$nuxt.$emit("textChange",t,this.idx)},changeTrans:function(t){this.$nuxt.$emit("transChange",t,this.idx)},timeEdit:function(){this.editTime=!this.editTime,this.editTime||this.$refs.inputTime.focus()},timeSet:function(){this.$nuxt.$emit("timeSet",this.idx)},addItem:function(){this.$nuxt.$emit("addItem",this.idx)},deleteItem:function(){this.$nuxt.$emit("deleteItem",this.idx)}}}),V=(n(624),n(16)),L=Object(V.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"track__style"},[n("div",{staticClass:"track__wrapper"},[n("div",{staticClass:"track__time"},[n(I.a,{ref:"inputTime",staticClass:"input__time",attrs:{value:t.start+" --\x3e "+t.end,outlined:"",dense:"","hide-details":"auto",readonly:t.editTime,rules:t.timeRule},on:{change:function(e){return t.changeTime(e)}}}),t._v(" "),n("div",{staticClass:"edit__time"},[n(r.a,{attrs:{icon:""},on:{click:t.timeEdit}},[n(f.a,[t._v("\n                        mdi-timer-edit\n                    ")])],1)],1)],1),t._v(" "),n("div",{staticClass:"track__text"},[n(R.a,{attrs:{value:t.segmentText,outlined:"",dense:"",rows:"3","row-height":"20","hide-details":""},on:{input:function(e){return t.changeText(e)},focusin:t.timeSet}})],1),t._v(" "),n("div",{staticClass:"track__trans__text"},[n(R.a,{attrs:{value:t.segmentTrans,outlined:"",dense:"",rows:"3","row-height":"20","hide-details":""},on:{input:function(e){return t.changeTrans(e)},focusin:t.timeSet}})],1),t._v(" "),n(r.a,{attrs:{icon:""},on:{click:t.deleteItem}},[n(f.a,[t._v("\n                mdi-close\n            ")])],1)],1),t._v(" "),n("div",{staticClass:"add__btn"},[n(r.a,{staticClass:"add__btn__style",attrs:{block:"",rounded:"",elevation:"0"},on:{click:t.addItem}},[n(f.a,[t._v("\n                mdi-plus\n            ")])],1)],1)])}),[],!1,null,"76298e36",null).exports,N=n(120),E=n.n(N);function M(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function U(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?M(Object(source),!0).forEach((function(e){Object(O.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):M(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var P={layout:"ServiceLayout",components:{TrackComponent:L},created:function(){var t=this;"undefined"!=typeof window&&window.addEventListener("resize",(function(){t.virtualHeight=t.$refs.trackBox.offsetHeight})),this.$nuxt.$on("onScrollTop",(function(){t.$refs.trackscroll.$el.scrollBy({top:-t.$refs.trackscroll.scrollTop,behavior:"smooth"})})),this.$nuxt.$on("addItem",function(){var e=Object(j.a)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fullTrack[n].end;case 2:r=e.sent,t.fullTrack.splice(n+1,0,{start:r,end:r,text:"새로운 자막"}),t.transTrack.splice(n+1,0,"new Track"),t.cueTrack.addCue(new VTTCue(t.timeToSec(r),t.timeToSec(r),"새로운 자막")),t.transCueTrack.addCue(new VTTCue(t.timeToSec(r),t.timeToSec(r),"new Track"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.$nuxt.$on("deleteItem",(function(e){t.fullTrack.splice(e,1),t.transTrack.splice(e,1),t.cueTrack.removeCue(t.cueTrack.cues[e]),t.transCueTrack.removeCue(t.transCueTrack.cues[e])}))},data:function(){return{isDev:"production".includes("dev"),video:{},videoTrack:[],selectFilename:"",loginState:!1,virtualHeight:0,readToVideo:!1,readyToTrack:!1,loading:0,step:1,preSignedUrlResponse:!1,uploadResponse:!1,trackCompleteResponse:!1,selectVideo:!1,beforeSelect:!0,dialog:!1,newVideoDialog:!1,downloadDialog:!1,deleteFileDialog:!1,fileTab:0,textTab:0,file:{},deleteItem:"",fullTrack:[],timeLine:[],originalTrack:[],transTrack:[],cueTrack:[],transCueTrack:[],track:"",trans:"",req:0,grant:2}},mounted:function(){var t=this;this.$store.dispatch("videoes/getFiles"),this.virtualHeight=this.$refs.trackBox.offsetHeight,this.$nuxt.$on("timeChange",(function(time,e){null!=time&&(t.fullTrack[e].start=time.substring(0,time.indexOf(" ")).trim(),t.fullTrack[e].end=time.substring(time.lastIndexOf(" ")+1).trim(),t.cueTrack.cues[e].startTime=t.timeToSec(time.substring(0,time.indexOf(" ")).trim()),t.cueTrack.cues[e].endTime=t.timeToSec(time.substring(time.lastIndexOf(" ")+1).trim()),t.transCueTrack.cues[e].startTime=t.timeToSec(time.substring(0,time.indexOf(" ")).trim()),t.transCueTrack.cues[e].endTime=t.timeToSec(time.substring(time.lastIndexOf(" ")+1).trim()))})),this.$nuxt.$on("textChange",(function(text,e){null!=text&&(t.fullTrack[e].text=text,t.cueTrack.cues[e].text=text)})),this.$nuxt.$on("transChange",(function(e,n){null!=e&&(t.transTrack[n]=e,t.transCueTrack.cues[n].text=e)})),this.$nuxt.$on("timeSet",(function(e){t.video.currentTime=t.cueTrack.cues[e].startTime}))},computed:{videoList:function(){return this.$store.state.videoes.files},videoURL:function(){return this.$store.state.videoes.fileURL},language:function(){return this.$store.state.manager.language},languages:function(){return this.$LANGUAGES_KO},req_lang:function(){return this.languages[this.req]},grant_lang:function(){return this.languages[this.grant]},req_code:function(){return this.$LANG_CODE[this.req]},grant_code:function(){return this.$LANG_CODE[this.grant]},trackMode:function(){switch(this.fileTab){case 1:return"srt";case 2:return"vtt";default:return"NotFoundMode"}}},watch:{fileTab:function(t){1===t?(this.$refs.tab_1.style.border="0",this.$refs.tab_1.style.backgroundColor="#2172FF",this.$refs.tab_1.style.opacity="1",this.$refs.tab_2.style.border="3px dashed grey",this.$refs.tab_2.style.backgroundColor="#FFFFFF",this.$refs.tab_2.style.opacity="0.6"):2===t?(this.$refs.tab_1.style.border="3px dashed grey",this.$refs.tab_1.style.backgroundColor="#FFFFFF",this.$refs.tab_1.style.opacity="0.6",this.$refs.tab_2.style.border="0",this.$refs.tab_2.style.backgroundColor="#2172FF",this.$refs.tab_2.style.opacity="1"):(this.$refs.tab_1.style.border="3px dashed grey",this.$refs.tab_1.style.backgroundColor="#FFFFFF",this.$refs.tab_1.style.opacity="0.6",this.$refs.tab_2.style.border="3px dashed grey",this.$refs.tab_2.style.backgroundColor="#FFFFFF",this.$refs.tab_2.style.opacity="0.6")},textTab:function(t){1===t?(this.$refs.textTab_1.style.border="0",this.$refs.textTab_1.style.backgroundColor="#2172FF",this.$refs.textTab_1.style.opacity="1",this.$refs.textTab_2.style.border="3px dashed grey",this.$refs.textTab_2.style.backgroundColor="#FFFFFF",this.$refs.textTab_2.style.opacity="0.6"):2===t?(this.$refs.textTab_1.style.border="3px dashed grey",this.$refs.textTab_1.style.backgroundColor="#FFFFFF",this.$refs.textTab_1.style.opacity="0.6",this.$refs.textTab_2.style.border="0",this.$refs.textTab_2.style.backgroundColor="#2172FF",this.$refs.textTab_2.style.opacity="1"):(this.$refs.textTab_1.style.border="3px dashed grey",this.$refs.textTab_1.style.backgroundColor="#FFFFFF",this.$refs.textTab_1.style.opacity="0.6",this.$refs.textTab_2.style.border="3px dashed grey",this.$refs.textTab_2.style.backgroundColor="#FFFFFF",this.$refs.textTab_2.style.opacity="0.6")}},methods:{isEmpty:function(t){return t.constructor===Object&&0===Object.keys(t).length},timeToSec:function(time){var t=0;if(/(((\d\d:\d\d)|(\d\d)):\d\d.\d\d\d)/gm.test(time)){var e=time.split(":").reverse();return 3===e.length?(t+=parseFloat(parseFloat(e[0]).toFixed(2)),t+=60*parseInt(e[1]),t+=3600*parseInt(e[2])):2===e.length&&(t+=parseFloat(parseFloat(e[0]).toFixed(2)),t+=60*parseInt(e[1])),t}return"time 형식 부정확"},uploadVideo:function(){if(this.selectVideo){this.newVideo();var t=this.selectFilename;this.$store.commit("videoes/setFileName",t.substring(0,t.lastIndexOf(".")));var e=t.substring(t.lastIndexOf(".")+1);this.$store.commit("videoes/setFileExt",e),this.$store.commit("videoes/setFileURL","https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/videoes/".concat(encodeURI(t))),this.step=2,this.newVideoDialog=!1,this.dialog=!0}else this.newVideoDialog=!1,this.$refs.upload.click()},extToContentType:function(t){switch(t){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":case"ogv":case"ogm":return"video/ogg";default:return"application/oct-stream"}},loadingLogic:function(t){var e=this;switch(t){case 1:var n=setInterval((function(){e.preSignedUrlResponse?(e.loading<16&&(e.loading=16),clearInterval(n)):e.loading<15&&e.loading++}),1500);break;case 2:var r=setInterval((function(){e.uploadResponse?(e.loading<33&&(e.loading=33),e.step=2,clearInterval(r)):e.loading<32&&e.loading++}),1500);break;case 3:var o=setInterval((function(){e.trackCompleteResponse?(e.loading<66&&(e.loading=66),e.step=3,clearInterval(o)):e.loading<65&&e.loading++}),2500);break;case 4:var c=setInterval((function(){0===e.transTrack.length?e.loading<99&&e.loading++:(e.loading<100&&(e.loading=100),e.dialog=!1,clearInterval(c),e.loading=0)}),2e3);break;default:console.log("step 종료")}},trackOn:function(t){var e=this;return Object(j.a)(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$nextTick();case 2:for(e.video=e.$refs.videoplayer,e.cueTrack=e.video.addTextTrack("subtitles",e.req_lang,e.req_code),e.transCueTrack=e.video.addTextTrack("subtitles",e.grant_lang,e.grant_code),e.cueTrack.mode="showing",e.transCueTrack.mode="showing",i=0;i<e.fullTrack.length;i++)e.cueTrack.addCue(new VTTCue(e.timeToSec(e.timeLine[i].start),e.timeToSec(e.timeLine[i].end),e.originalTrack[i]));for(n=0;n<e.fullTrack.length;n++)e.transCueTrack.addCue(new VTTCue(e.timeToSec(e.timeLine[n].start),e.timeToSec(e.timeLine[n].end),e.transTrack[n]));case 9:case"end":return t.stop()}}),t)})))()},sliceName:function(t){return t.substring(t.lastIndexOf("/")+1)},trackMerge:function(){for(var t=[],i=0;i<Math.max(this.timeLine.length,this.originalTrack.length);i++)t[i]=U(U({},this.timeLine[i]),{text:this.originalTrack[i]});this.fullTrack=t},trackFormating:function(t,track){if("srt"===t){for(var e="",i=0;i<Math.min(this.timeLine.length,track.length);i++)e+="".concat(i+1,"\n").concat(this.timeLine[i].start.replace(".",",")," --\x3e ").concat(this.timeLine[i].end.replace(".",","),"\n").concat(track[i],"\n\n");return e}for(var n="WEBVTT\n\n",r=0;r<Math.min(this.timeLine.length,track.length);r++)n+="".concat(this.timeLine[r].start," --\x3e ").concat(this.timeLine[r].end,"\n").concat(track[r],"\n\n");this.trans=n},onSelectFile:function(t){var e=this;return Object(j.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.selectVideo=!0,e.selectFilename=t,e.readToVideo){n.next=14;break}return n.next=5,e.$store.commit("videoes/setFileName",t.substring(0,t.lastIndexOf(".")));case 5:return r=t.substring(t.lastIndexOf(".")+1),n.next=8,e.$store.commit("videoes/setFileExt",r);case 8:return n.next=10,e.$store.commit("videoes/setFileURL","https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/videoes/".concat(encodeURI(t)));case 10:e.step=2,e.dialog=!0,n.next=15;break;case 14:e.newVideoDialog=!0;case 15:case"end":return n.stop()}}),n)})))()},onChange:function(t){var e=this;return Object(j.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{null!=t&&0!=t.target.files.length?(e.newVideo(),e.file=t.target.files[0],e.dialog=!0):console.log("e is null")}catch(t){console.log(t)}case 1:case"end":return n.stop()}}),n)})))()},onTaskStart:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.beforeSelect=!1,t.originalTrack="",t.transTrack="",t.selectVideo){e.next=57;break}return n=t.file.name,r=new FormData,o=n.substring(0,n.lastIndexOf(".")),c=n.substring(n.lastIndexOf(".")+1),t.$store.commit("videoes/setFileName",o),t.$store.commit("videoes/setFileExt",c),r.append("fileKey",t.file),e.prev=11,t.loadingLogic(1),e.next=15,t.$store.dispatch("videoes/signedURL",r);case 15:return l=e.sent,t.preSignedUrlResponse=!0,t.loadingLogic(2),e.next=20,E.a.put(l,t.file,{headers:{"Content-Type":t.extToContentType(c)},onUploadProgress:function(t){var e=100*t.loaded/t.total;Math.round(e)}});case 20:if(200!==e.sent.status){e.next=49;break}return t.loadingLogic(3),t.uploadResponse=!0,e.next=26,t.$store.commit("videoes/setFile",void 0);case 26:return e.next=28,t.$store.dispatch("videoes/setURL");case 28:return e.next=30,t.$store.dispatch("videoes/postVideo");case 30:return d=e.sent,t.trackCompleteResponse=!0,t.track=d.track,t.originalTrack=d.segment,t.timeLine=d.timeline,t.trackMerge(),t.$store.dispatch("videoes/getFiles"),t.loadingLogic(4),e.next=40,t.$store.dispatch("videoes/transTrack",{from:t.req_code,to:t.grant_code,track:t.fullTrack});case 40:t.transTrack=e.sent,t.trackFormating("vtt",t.transTrack),t.readToVideo=!0,t.readyToTrack=!0,t.trackOn(t.req_lang),t.selectFilename=t.$store.state.videoes.fileName,t.dialog=!1,e.next=50;break;case 49:t.$menage.showMessage({message:"영상 업로드에 실패했습니다.\n관리자에게 문의하세요.",color:"error"});case 50:e.next=55;break;case 52:e.prev=52,e.t0=e.catch(11),console.log(e.t0);case 55:e.next=85;break;case 57:return e.prev=57,t.loading=33,t.loadingLogic(3),t.uploadResponse=!0,e.next=63,t.$store.dispatch("videoes/setURL");case 63:return e.next=65,t.$store.dispatch("videoes/postVideo");case 65:return _=e.sent,t.trackCompleteResponse=!0,t.track=_.track,t.originalTrack=_.segment,t.timeLine=_.timeline,t.trackMerge(),t.loadingLogic(4),e.next=74,t.$store.dispatch("videoes/transTrack",{from:t.req_code,to:t.grant_code,track:t.fullTrack});case 74:t.transTrack=e.sent,t.readToVideo=!0,t.readyToTrack=!0,t.trackOn(t.req_lang),t.dialog=!1,t.selectVideo=!1,e.next=85;break;case 82:e.prev=82,e.t1=e.catch(57),console.log(e.t1);case 85:case"end":return e.stop()}}),e,null,[[11,52],[57,82]])})))()},newVideo:function(){this.newVideoDialog=!1,this.readToVideo=!1,this.readyToTrack=!1,this.file={},this.fullTrack=[],this.timeLine=[],this.originalTrack=[],this.transTrack=[],this.track="",this.trans="",this.loading=0,this.dialog=!1,this.beforeSelect=!0,this.step=1,this.preSignedUrlResponse=!1,this.uploadResponse=!1,this.trackCompleteResponse=!1},downloadDialogOpen:function(){this.fileTab=0,this.textTab=0,this.downloadDialog=!this.downloadDialog},downloadFile:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.trackFormating(t.trackMode,1===t.textTab?t.originalTrack:t.transTrack);case 2:return n=e.sent,e.next=5,t.$store.dispatch("videoes/textToTrack",{track:n,ext:t.trackMode});case 5:t.$refs.download.$el.click(),t.downloadDialogOpen();case 7:case"end":return e.stop()}}),e)})))()},firstTap:function(){this.fileTab=1},secondTap:function(){this.fileTab=2},firstTextTap:function(){this.textTab=1},secondTextTap:function(){this.textTab=2},deleteFile:function(t){var e=this.sliceName(t.Key);this.$store.commit("videoes/setFileName",e.substring(0,e.lastIndexOf("."))),this.$store.commit("videoes/setFileExt",e.substring(e.lastIndexOf(".")+1)),this.deleteFileDialog=!0},deleteFileOK:function(){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.$nuxt.$loading.start(),e.next=4,t.$store.dispatch("videoes/deleteFile");case 4:t.$nuxt.$loading.finish(),t.$store.commit("videoes/setFileName",""),t.$store.commit("videoes/setFileExt",""),t.deleteFileDialog=!1,e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),t.$nuxt.$loading.finish(),t.deleteFileDialog=!1,console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},deleteFileNO:function(){this.$store.commit("videoes/setFileName",""),this.$store.commit("videoes/setFileExt",""),this.deleteFileDialog=!1}}},z=P,A=(n(626),Object(V.a)(z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"video__box"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"upload",attrs:{type:"file",accept:".mp4"},on:{change:t.onChange}}),t._v(" "),!0===t.readToVideo?n("div",{staticClass:"video__player"},[n("video",{ref:"videoplayer",staticClass:"player",attrs:{src:t.videoURL,controls:"",preload:"auto"}})]):n("div",{staticClass:"video__player"},[n(l.a,{attrs:{width:"60vw",persistent:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.attrs;return[n(r.a,t._b({attrs:{rounded:""},on:{click:t.uploadVideo}},"v-btn",o,!1),[n(f.a,[t._v("\n                            mdi-plus\n                        ")]),t._v("\n                        새로 만들기\n                    ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),n(o.a,[n("div",{staticClass:"dialog__box"},[n("div",{staticClass:"dialog__box__setting"},[n("div",{staticClass:"setting__select__box",on:{click:function(e){t.dialog=!t.dialog}}},[n(m.a,{staticClass:"img",attrs:{src:"https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/images/logo.png"}})],1),t._v(" "),t.beforeSelect?n("div",{staticClass:"setting__select__box"},[n("div",{staticClass:"select__box"},[n("div",[n($.a,{staticClass:"header__class",attrs:{elevation:"0"}},[n(F.b,{staticClass:"font-weight-bold"},[t._v("\n                                                영상의 원본 언어\n                                            ")])],1),t._v(" "),n("div",{staticClass:"overflow-y-auto list__wrapper"},[n(x.a,[n(w.a,{attrs:{mandatory:""},model:{value:t.req,callback:function(e){t.req=e},expression:"req"}},t._l(t.languages,(function(e,r){return n(k.a,{key:r,attrs:{"active-class":"list__select"}},[n(y.c,[t._v("\n                                                            "+t._s(e)+"\n                                                        ")])],1)})),1)],1)],1)],1),t._v(" "),n(f.a,[t._v("\n                                        mdi-arrow-right\n                                    ")]),t._v(" "),n("div",[n($.a,{staticClass:"header__class",attrs:{elevation:"0"}},[n(F.b,{staticClass:"font-weight-bold"},[t._v("\n                                                번역하고 싶은 언어\n                                            ")])],1),t._v(" "),n("div",{staticClass:"overflow-y-auto list__wrapper"},[n(x.a,[n(w.a,{attrs:{mandatory:""},model:{value:t.grant,callback:function(e){t.grant=e},expression:"grant"}},t._l(t.languages,(function(e,r){return n(k.a,{key:r,attrs:{"active-class":"list__select"}},[n(y.c,[t._v("\n                                                            "+t._s(e)+"\n                                                        ")])],1)})),1)],1)],1)],1)],1),t._v(" "),n("div",{staticClass:"action__box"},[n(r.a,{attrs:{block:"",rounded:"",color:"#013183",dark:""},on:{click:t.onTaskStart}},[t._v("\n                                        번역하기\n                                    ")])],1)]):n("div",{staticClass:"dialog__box__process"},[n("div",{staticClass:"process__stepper"},[n("div",{staticClass:"stepper"},[n(r.a,{staticClass:"stepper__btn",attrs:{block:"",rounded:"",color:"primary",disabled:1!=t.step}},[t._v("\n                                            영상 업로드\n                                        ")])],1),t._v(" "),1===t.step?n("transition",[n("div",{staticClass:"arrow__wrapper"},[n("div",{staticClass:"arrow"},[t._v("▼")]),t._v(" "),n("div",{staticClass:"arrow"},[t._v("▼")]),t._v(" "),n("div",{staticClass:"arrow"},[t._v("▼")])])]):n("div",{staticClass:"arrow__wrapper"},[n("div",[t._v("▼")]),t._v(" "),n("div",[t._v("▼")]),t._v(" "),n("div",[t._v("▼")])]),t._v(" "),n("div",{staticClass:"stepper",attrs:{div:""}},[n(r.a,{staticClass:"stepper__btn",attrs:{block:"",rounded:"",color:"warning",disabled:2!=t.step}},[t._v("\n                                            영상 인식\n                                        ")])],1),t._v(" "),2===t.step?n("transition",[n("div",{staticClass:"arrow__wrapper"},[n("div",{staticClass:"arrow"},[t._v("▼")]),t._v(" "),n("div",{staticClass:"arrow"},[t._v("▼")]),t._v(" "),n("div",{staticClass:"arrow"},[t._v("▼")])])]):n("div",{staticClass:"arrow__wrapper"},[n("div",[t._v("▼")]),t._v(" "),n("div",[t._v("▼")]),t._v(" "),n("div",[t._v("▼")])]),t._v(" "),n("div",{staticClass:"stepper",attrs:{div:""}},[n(r.a,{staticClass:"stepper__btn",attrs:{block:"",rounded:"",color:"success",disabled:3!=t.step}},[t._v("\n                                            자막 번역\n                                        ")])],1)],1)])]),t._v(" "),n("div",{staticClass:"dialog__box__loading"},[n(T.a,{attrs:{color:"#013183",height:"25px"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.value;return[n("strong",{staticStyle:{color:"white"}},[t._v(t._s(Math.ceil(r))+"%")])]}}]),model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}})],1)])])],1)],1),t._v(" "),n("div",{staticClass:"video__action"},[n(r.a,{staticClass:"video__action__btn",attrs:{rounded:"",color:"#013183",dark:t.readToVideo,disabled:!t.readToVideo},on:{click:function(e){e.stopPropagation(),t.newVideoDialog=!t.newVideoDialog}}},[n(f.a,[t._v("\n                    mdi-plus\n                ")]),t._v("\n                새 영상\n            ")],1),t._v(" "),n(r.a,{staticClass:"video__action__btn",attrs:{rounded:"",color:"#013183",dark:t.readToVideo,disabled:!t.readToVideo},on:{click:function(e){return e.stopPropagation(),t.downloadDialogOpen.apply(null,arguments)}}},[n(f.a,[t._v("\n                    mdi-download\n                ")]),t._v("\n                다운로드\n            ")],1)],1),t._v(" "),n(l.a,{attrs:{width:"600",persistent:""},model:{value:t.downloadDialog,callback:function(e){t.downloadDialog=e},expression:"downloadDialog"}},[n(o.a,{staticClass:"download__card"},[n(c.d,{staticClass:"download__card__title",attrs:{tag:"div"}},[t._v("\n                    다운로드 양식 선택\n                ")]),t._v(" "),n("div",{staticClass:"download__card__content"},[n("div",{staticClass:"hr-sect"},[t._v("텍스트 정보")]),t._v(" "),n("div",{staticClass:"card__content__text pa-2"},[n("div",{ref:"textTab_1",staticClass:"card__content__btn pa-4",on:{click:t.firstTextTap}},[n("div",{staticClass:"d-flex align-center justify-center",staticStyle:{width:"100%",height:"50%"}},[n(f.a,{staticClass:"text-h4",attrs:{dark:1===t.textTab}},[t._v("\n                                    mdi-format-text-variant-outline\n                                ")])],1),t._v("\n                            원문\n                        ")]),t._v(" "),n("div",{ref:"textTab_2",staticClass:"card__content__btn pa-4",on:{click:t.secondTextTap}},[n("div",{staticClass:"d-flex align-center justify-center",staticStyle:{width:"100%",height:"50%"}},[n(f.a,{staticClass:"text-h4",attrs:{dark:2===t.textTab}},[t._v("\n                                    mdi-translate-variant\n                                ")])],1),t._v("\n                            번역\n                        ")])]),t._v(" "),n("div",{staticClass:"hr-sect"},[t._v("파일 포맷")]),t._v(" "),n("div",{staticClass:"card__content__btngroup"},[n("div",{ref:"tab_1",staticClass:"card__content__btn pa-4",on:{click:t.firstTap}},[n("div",{staticClass:"d-flex align-center justify-center",staticStyle:{width:"100%",height:"80%"}},[n(f.a,{staticClass:"text-h1",attrs:{dark:1===t.fileTab}},[t._v("\n                                    mdi-file\n                                ")])],1),t._v(" "),n(r.a,{staticClass:"non-flex readonly__btn font-weight-bold",staticStyle:{width:"100%",height:"20%","font-size":"18px"},attrs:{ripple:!1,depressed:"",rounded:"",block:""}},[t._v("\n                                .srt\n                            ")])],1),t._v(" "),n("div",{ref:"tab_2",staticClass:"card__content__btn pa-4",on:{click:t.secondTap}},[n("div",{staticClass:"d-flex align-center justify-center",staticStyle:{width:"100%",height:"80%"}},[n(f.a,{staticClass:"text-h1",attrs:{dark:2===t.fileTab}},[t._v("\n                                    mdi-file\n                                ")])],1),t._v(" "),n(r.a,{staticClass:"non-flex readonly__btn font-weight-bold",staticStyle:{width:"100%",height:"20%","font-size":"18px"},attrs:{ripple:!1,depressed:"",rounded:"",block:""}},[t._v("\n                                .vtt\n                            ")])],1)])]),t._v(" "),n(c.a,{staticClass:"card__action"},[n(r.a,{staticClass:"auto-flex",attrs:{depressed:"",color:"success",disabled:0===t.fileTab||0===t.textTab},on:{click:function(e){return e.stopPropagation(),t.downloadFile.apply(null,arguments)}}},[n(f.a,[t._v("\n                            mdi-download\n                        ")]),t._v("\n                        다운로드\n                    ")],1),t._v(" "),n(r.a,{staticClass:"auto-flex",attrs:{depressed:"",color:"error"},on:{click:function(e){e.stopPropagation(),t.downloadDialog=!t.downloadDialog}}},[n(f.a,[t._v("\n                            mdi-close\n                        ")]),t._v("\n                        닫기\n                    ")],1)],1)],1)],1),t._v(" "),n("div",{staticClass:"video__list"},[n(h.a,{staticClass:"video__list__group",attrs:{tile:"",dark:""}},[n(d.a,[n(v.a,{attrs:{color:"#013183"}},[t._v("\n                        파일 목록\n                    ")]),t._v(" "),t.loginState?n(_.a,{staticClass:"video__list__content"},[n("div",{staticClass:"list__content__disabled"},[t._v("\n                            로그인 후"),n("br"),t._v(" 이용가능 합니다.\n                        ")])]):n(_.a,{staticClass:"video__list__content"},[n(S.a,{attrs:{bench:"10",items:t.videoList,height:"50vh","item-height":"64"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.item;return[n(k.a,[n(y.c,{staticClass:"content__list__title"},[n(r.a,{staticClass:"content__list__btn",attrs:{"x-large":"",depressed:""},on:{click:function(e){e.stopPropagation(),t.onSelectFile(t.sliceName(o.Key))}}},[n(f.a,[t._v("\n                                                mdi-file-video\n                                            ")]),t._v(" "),n("div",{staticClass:"list__btn__label"},[t._v("\n                                                "+t._s(t.sliceName(o.Key))+"\n                                            ")]),t._v(" "),n(C.a),t._v(" "),n(r.a,{attrs:{icon:"",right:""},on:{click:function(e){return e.stopPropagation(),t.deleteFile(o)}}},[n(f.a,[t._v("\n                                                    mdi-close\n                                                ")])],1)],1)],1)],1)]}}])})],1)],1)],1)],1)],1),t._v(" "),n(l.a,{attrs:{width:"250"},model:{value:t.deleteFileDialog,callback:function(e){t.deleteFileDialog=e},expression:"deleteFileDialog"}},[n(o.a,[n(c.d,[n("h5",[t._v("정말 "),n("span",{staticStyle:{"font-weight":"bold",color:"red"}},[t._v("삭제")]),t._v("하시겠습니까?")])]),t._v(" "),n(c.c,[t._v("\n                파일을 "),n("span",{staticStyle:{"font-weight":"bold"}},[t._v("삭제")]),t._v("하는 경우, "),n("br"),t._v("\n                삭제한 파일을 복구할 수 "),n("span",{staticStyle:{color:"red"}},[t._v("없습니다.")])]),t._v(" "),n(c.a,[n(C.a),t._v(" "),n(r.a,{attrs:{text:""},on:{click:t.deleteFileOK}},[t._v("예")]),t._v(" "),n(r.a,{attrs:{text:""},on:{click:t.deleteFileNO}},[t._v("아니오")])],1)],1)],1),t._v(" "),n(l.a,{attrs:{width:"250"},model:{value:t.newVideoDialog,callback:function(e){t.newVideoDialog=e},expression:"newVideoDialog"}},[n(o.a,[n(c.d,[n("h5",[t._v("정말 가져오시겠습니까?")])]),t._v(" "),n(c.c,[n("span",{staticStyle:{"font-weight":"bold"}},[t._v("수정하는 중")]),t._v("에 가져오는 경우, "),n("br"),t._v("\n                수정한 내용이 "),n("span",{staticStyle:{color:"red"}},[t._v("모두 사라집니다.")])]),t._v(" "),n(c.a,[n(C.a),t._v(" "),n(r.a,{attrs:{text:""},on:{click:t.uploadVideo}},[t._v("예")]),t._v(" "),n(r.a,{attrs:{text:""},on:{click:function(e){t.newVideoDialog=!1}}},[t._v("아니오")])],1)],1)],1),t._v(" "),n("div",{ref:"trackBox",staticClass:"track__box"},[t.readyToTrack?n(S.a,{ref:"trackscroll",staticClass:"track__box__scroll",attrs:{bench:"15",items:t.fullTrack,height:t.virtualHeight,"item-height":"160"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item,o=e.index;return[n("div",{staticClass:"track__box__wrapper"},[n("track-component",{attrs:{start:r.start,end:r.end,text:r.text,trans:t.transTrack[o],idx:o}})],1)]}}],null,!1,3315004982)}):n("div",[t._v("\n            영상을 추가하면 자막을 편집하실 수 있습니다. "),n("br")])],1),t._v(" "),n(r.a,{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"download",attrs:{href:(t.isDev?"http://localhost:3085":"https://api.dmtlabs.kr")+"/video/download/"+t.selectFilename+"."+t.trackMode}})],1)}),[],!1,null,"a8c7139e",null));e.default=A.exports}}]);