(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{547:function(e,t,n){var content=n(625);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("48199f14",content,!0,{sourceMap:!1})},548:function(e,t,n){var content=n(627);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("e250ba88",content,!0,{sourceMap:!1})},624:function(e,t,n){"use strict";n(547)},625:function(e,t,n){var r=n(9)(!1);r.push([e.i,".track__style[data-v-76298e36]{height:156px;display:flex;border:1px solid grey;border-radius:25px;margin:5px;padding:0 10px;justify-content:center;align-items:center;flex-direction:column}.add__btn[data-v-76298e36]{display:flex;width:100%;height:20%;margin:5px 0}.add__btn__style[data-v-76298e36]{display:flex;height:100%!important;background-color:#e1e1e1!important}.track__wrapper[data-v-76298e36]{width:100%;height:80%;justify-content:center}.track__time[data-v-76298e36],.track__wrapper[data-v-76298e36]{display:flex;align-items:center}.track__time[data-v-76298e36]{justify-content:space-around;padding:5px;width:25%}.input__time[data-v-76298e36]{width:80%;flex:0 0 auto!important}.input__time[data-v-76298e36] input{text-align:center}.edit__time[data-v-76298e36]{width:10%;display:flex;align-items:center;justify-content:center}.track__text[data-v-76298e36],.track__trans__text[data-v-76298e36]{display:flex;align-items:center;justify-content:space-around;padding:5px;width:35%}",""]),e.exports=r},626:function(e,t,n){"use strict";n(548)},627:function(e,t,n){var r=n(9)(!1);r.push([e.i,'.non-flex[data-v-e4e8ee3a]{flex:0 0 auto}.auto-flex[data-v-e4e8ee3a]{flex:1 1 auto}.readonly__btn[data-v-e4e8ee3a]{opacity:1!important}.wrapper[data-v-e4e8ee3a]{width:100%;height:100%}.video__box[data-v-e4e8ee3a]{position:absolute;left:0;width:25%;height:100%;border-right:1px solid #8c867a}.video__player[data-v-e4e8ee3a]{display:flex;align-items:center;justify-content:center;width:100%;height:35%;background:#000}.player[data-v-e4e8ee3a]{width:100%;height:100%}.video__action[data-v-e4e8ee3a]{display:flex;align-items:center;justify-content:space-around;width:100%;height:5%}.video__action__btn[data-v-e4e8ee3a]{width:45%}.video__list[data-v-e4e8ee3a]{width:100%;height:60%}.video__list[data-v-e4e8ee3a],.video__list__group[data-v-e4e8ee3a]{position:absolute;bottom:0}.video__list__content[data-v-e4e8ee3a]{height:50vh}.list__content__disabled[data-v-e4e8ee3a]{display:flex;width:100%;height:100%;align-items:center;justify-content:center;text-align:center}.content__list__title[data-v-e4e8ee3a]{display:flex;align-items:center;justify-content:flex-start}.content__list__btn[data-v-e4e8ee3a]{flex:1 1 0;justify-content:flex-start!important}.content__list__btn[data-v-e4e8ee3a] span{width:100%}.list__btn__label[data-v-e4e8ee3a]{max-width:80%;overflow:hidden;text-overflow:ellipsis}.track__box[data-v-e4e8ee3a]{display:flex;position:absolute;left:25%;align-items:center;justify-content:center;width:75%;height:100%}.track__wrapper[data-v-e4e8ee3a]{width:100%;height:100%}.track__box__scroll[data-v-e4e8ee3a]{display:flex;flex-direction:column}.track__box__scroll[data-v-e4e8ee3a]::-webkit-scrollbar{display:block;width:10px;height:8px}.track__box__scroll[data-v-e4e8ee3a]::-webkit-scrollbar-track{background-color:transparent}.track__box__scroll[data-v-e4e8ee3a]::-webkit-scrollbar-thumb{border-radius:5px;background:#2172ff}.track__box__wrapper[data-v-e4e8ee3a]{width:95%;align-items:center;justify-content:center}.track__box[data-v-e4e8ee3a] .v-virtual-scroll__item{display:flex;align-items:center;justify-content:center}.dialog__card[data-v-e4e8ee3a]{width:75vw}.dialog__box[data-v-e4e8ee3a]{flex-direction:column;text-align:center;height:50vh;padding:25px}.dialog__box[data-v-e4e8ee3a],.dialog__box__setting[data-v-e4e8ee3a]{display:flex;align-items:center;justify-content:center;width:100%}.dialog__box__setting[data-v-e4e8ee3a]{height:90%}.setting__select__box[data-v-e4e8ee3a]{display:flex;flex-direction:column;align-items:center;justify-content:space-around;width:50%;height:100%}.img[data-v-e4e8ee3a]{flex:0 0 auto}.dialog__box__process[data-v-e4e8ee3a]{flex-direction:column;width:50%;height:100%}.dialog__box__loading[data-v-e4e8ee3a],.dialog__box__process[data-v-e4e8ee3a]{display:flex;align-items:center;justify-content:center}.dialog__box__loading[data-v-e4e8ee3a]{width:100%;height:10%}.download__card[data-v-e4e8ee3a]{flex-direction:column;height:50vh}.download__card[data-v-e4e8ee3a],.download__card__title[data-v-e4e8ee3a]{display:flex;align-items:center;justify-content:center}.download__card__title[data-v-e4e8ee3a]{width:100%;background:#013183;color:#fff}.download__card__content[data-v-e4e8ee3a]{display:flex;flex-direction:column;align-items:center;justify-content:space-between;width:100%;height:90%;padding:25px}.card__content__btngroup[data-v-e4e8ee3a]{display:flex;align-items:center;justify-content:space-around;width:100%;height:60%}.card__content__btn[data-v-e4e8ee3a]{display:flex;flex-direction:column;align-items:center;justify-content:center;border:3px dashed grey;border-radius:10%;width:45%;height:100%;opacity:.6;transition:.3s}.card__content__btn[data-v-e4e8ee3a]:hover{border:15px solid #2172ff!important;background-color:#2172ff!important;opacity:1!important;cursor:pointer}.card__content__text[data-v-e4e8ee3a]{display:flex;align-items:center;justify-content:space-around;width:100%;height:30%}.card__action[data-v-e4e8ee3a]{justify-content:center;width:100%;height:10%}.select__box[data-v-e4e8ee3a]{height:90%}.action__box[data-v-e4e8ee3a],.select__box[data-v-e4e8ee3a]{display:flex;justify-content:space-around;width:100%;padding:25px}.action__box[data-v-e4e8ee3a]{align-items:center;height:10%}.list__wrapper[data-v-e4e8ee3a]{width:100%;height:80%}.header__class[data-v-e4e8ee3a]{border-bottom:3px solid green}.list__select[data-v-e4e8ee3a]{border:solid #013183!important;color:#013183!important}.process__stepper[data-v-e4e8ee3a]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%}.stepper[data-v-e4e8ee3a]{width:50%;padding:5%}.stepper__btn[data-v-e4e8ee3a]{border:3px solid #013183}.arrow__wrapper[data-v-e4e8ee3a]{display:flex;width:100%;height:100%;flex-direction:column;align-items:center;justify-content:center}.arrow[data-v-e4e8ee3a]{color:#2172ff;-webkit-animation:arrowAnimation-data-v-e4e8ee3a 1.5s ease infinite;animation:arrowAnimation-data-v-e4e8ee3a 1.5s ease infinite;-webkit-animation-fill-mode:both;animation-fill-mode:both}.arrow[data-v-e4e8ee3a]:first-child{-webkit-animation-delay:.75s;animation-delay:.75s}.arrow[data-v-e4e8ee3a]:nth-child(2){-webkit-animation-delay:1s;animation-delay:1s}.arrow[data-v-e4e8ee3a]:nth-child(3){-webkit-animation-delay:1.25s;animation-delay:1.25s}.hr-sect[data-v-e4e8ee3a]{display:flex;align-items:center;color:rgba(0,0,0,.35);font-size:12px;width:100%;height:5%}.hr-sect[data-v-e4e8ee3a]:after,.hr-sect[data-v-e4e8ee3a]:before{content:"";flex-grow:1;background:rgba(0,0,0,.35);height:1px;font-size:0;line-height:0;margin:0 16px}@-webkit-keyframes arrowAnimation-data-v-e4e8ee3a{0%{color:#fff}to{color:#2172ff}}@keyframes arrowAnimation-data-v-e4e8ee3a{0%{color:#fff}to{color:#2172ff}}',""]),e.exports=r},657:function(e,t,n){"use strict";n.r(t);var r=n(472),o=n(192),c=n(68),l=n(485),d=n(597),_=n(599),v=n(598),f=n(596),h=n(189),m=n(158),x=n(188),k=n(120),w=n(191),T=n(3),y=n(193),C=n(481),$=n(49),F=n(58),O=n(653),S=(n(8),n(11),n(13),n(14),n(1)),j=n(6),I=(n(50),n(28),n(12),n(59),n(60),n(23),n(44),n(469)),R=n(535),D=(n(18),{props:{idx:{type:Number,require:!0},start:{type:String,default:"00:00:00.000"},end:{type:String,default:"00:00:00.000"},text:{type:String,default:""},trans:{type:String,default:""}},data:function(){return{editTime:!0,timeRule:[function(e){return/(((\d\d:\d\d)|(\d\d)):\d\d.\d\d\d) --> (((\d\d:\d\d)|(\d\d)):\d\d.\d\d\d)/.test(e)||"형식이 맞지 않습니다."}]}},computed:{segmentText:function(){return this.text.split("\\n")},segmentTrans:function(){return this.trans.split("\\n")}},methods:{msToString:function(time){if(0===time)return"00:00:00.000";var e=time/36e5>=1?parseInt(time/36e5):0,t=time/6e4>=1?time/6e4>=60?parseInt(time/6e4)-60>=1?parseInt(time/6e4)-60:0:parseInt(time/6e4):0,n=time%6e4>=1?parseInt(time%6e4/1e3)>=1?parseInt(time%6e4/1e3):0:parseInt(time/1e3)>=1?parseInt(time/1e3):0,r=time%1e3,o=e/10>=1?e:"0".concat(e),c=t/10>=1?t:"0".concat(t),l=n/10>=1?n:"0".concat(n),d=r/100>=1?r:r/10>=1?"0".concat(r):"00".concat(r);return"".concat(o,":").concat(c,":").concat(l,".").concat(d)},changeTime:function(e){this.$nuxt.$emit("timeChange",e,this.idx)},changeText:function(e){this.$nuxt.$emit("textChange",e,this.idx)},changeTrans:function(e){this.$nuxt.$emit("transChange",e,this.idx)},timeEdit:function(){this.editTime=!this.editTime,this.editTime||this.$refs.inputTime.focus()},timeSet:function(){this.$nuxt.$emit("timeSet",this.idx)},addItem:function(){this.$nuxt.$emit("addItem",this.idx)},deleteItem:function(){this.$nuxt.$emit("deleteItem",this.idx)}}}),V=(n(624),n(16)),L=Object(V.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"track__style"},[n("div",{staticClass:"track__wrapper"},[n("div",{staticClass:"track__time"},[n(I.a,{ref:"inputTime",staticClass:"input__time",attrs:{value:e.start+" --\x3e "+e.end,outlined:"",dense:"","hide-details":"auto",readonly:e.editTime,rules:e.timeRule},on:{change:function(t){return e.changeTime(t)}}}),e._v(" "),n("div",{staticClass:"edit__time"},[n(r.a,{attrs:{icon:""},on:{click:e.timeEdit}},[n(h.a,[e._v("\n                        mdi-timer-edit\n                    ")])],1)],1)],1),e._v(" "),n("div",{staticClass:"track__text"},[n(R.a,{attrs:{value:e.segmentText,outlined:"",dense:"",rows:"3","row-height":"20","hide-details":""},on:{input:function(t){return e.changeText(t)},focusin:e.timeSet}})],1),e._v(" "),n("div",{staticClass:"track__trans__text"},[n(R.a,{attrs:{value:e.segmentTrans,outlined:"",dense:"",rows:"3","row-height":"20","hide-details":""},on:{input:function(t){return e.changeTrans(t)},focusin:e.timeSet}})],1),e._v(" "),n(r.a,{attrs:{icon:""},on:{click:e.deleteItem}},[n(h.a,[e._v("\n                mdi-close\n            ")])],1)],1),e._v(" "),n("div",{staticClass:"add__btn"},[n(r.a,{staticClass:"add__btn__style",attrs:{block:"",rounded:"",elevation:"0"},on:{click:e.addItem}},[n(h.a,[e._v("\n                mdi-plus\n            ")])],1)],1)])}),[],!1,null,"76298e36",null).exports,N=n(118),E=n.n(N);function M(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function U(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?M(Object(source),!0).forEach((function(t){Object(S.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):M(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var P={layout:"ServiceLayout",components:{TrackComponent:L},created:function(){var e=this;"undefined"!=typeof window&&window.addEventListener("resize",(function(){e.virtualHeight=e.$refs.trackBox.offsetHeight})),this.$nuxt.$on("onScrollTop",(function(){e.$refs.trackscroll.$el.scrollBy({top:-e.$refs.trackscroll.scrollTop,behavior:"smooth"})})),this.$nuxt.$on("addItem",function(){var t=Object(j.a)(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fullTrack[n].end;case 2:r=t.sent,e.fullTrack.splice(n+1,0,{start:r,end:r,text:"새로운 자막"}),e.originalTrack.splice(n+1,0,"새로운 자막"),e.transTrack.splice(n+1,0,"new Track"),e.cueTrack.addCue(new VTTCue(e.timeToSec(r),e.timeToSec(r),"새로운 자막")),e.transCueTrack.addCue(new VTTCue(e.timeToSec(r),e.timeToSec(r),"new Track"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),this.$nuxt.$on("deleteItem",(function(t){e.fullTrack.splice(t,1),e.originalTrack.splice(t,1),e.transTrack.splice(t,1),e.cueTrack.removeCue(e.cueTrack.cues[t]),e.transCueTrack.removeCue(e.transCueTrack.cues[t])}))},data:function(){return{isDev:"production".includes("dev"),video:{},videoTrack:[],selectFilename:"",loginState:!1,virtualHeight:0,readToVideo:!1,readyToTrack:!1,loading:0,step:1,preSignedUrlResponse:!1,uploadResponse:!1,trackCompleteResponse:!1,selectVideo:!1,beforeSelect:!0,dialog:!1,newVideoDialog:!1,downloadDialog:!1,deleteFileDialog:!1,fileTab:0,textTab:0,file:{},deleteItem:"",fullTrack:[],timeLine:[],originalTrack:[],transTrack:[],cueTrack:[],transCueTrack:[],track:"",trans:"",req:0,grant:2}},mounted:function(){var e=this;this.$store.dispatch("videoes/getFiles"),this.virtualHeight=this.$refs.trackBox.offsetHeight,this.$nuxt.$on("timeChange",(function(time,t){null!=time&&(e.fullTrack[t].start=time.substring(0,time.indexOf(" ")).trim(),e.fullTrack[t].end=time.substring(time.lastIndexOf(" ")+1).trim(),e.timeLine[t].start=time.substring(0,time.indexOf(" ")).trim(),e.timeLine[t].end=time.substring(time.lastIndexOf(" ")+1).trim(),e.cueTrack.cues[t].startTime=e.timeToSec(time.substring(0,time.indexOf(" ")).trim()),e.cueTrack.cues[t].endTime=e.timeToSec(time.substring(time.lastIndexOf(" ")+1).trim()),e.transCueTrack.cues[t].startTime=e.timeToSec(time.substring(0,time.indexOf(" ")).trim()),e.transCueTrack.cues[t].endTime=e.timeToSec(time.substring(time.lastIndexOf(" ")+1).trim()))})),this.$nuxt.$on("textChange",(function(text,t){null!=text&&(e.fullTrack[t].text=text,e.originalTrack[t]=text,e.cueTrack.cues[t].text=text)})),this.$nuxt.$on("transChange",(function(t,n){null!=t&&(e.transTrack[n]=t,e.transCueTrack.cues[n].text=t)})),this.$nuxt.$on("timeSet",(function(t){e.video.currentTime=e.cueTrack.cues[t].startTime}))},computed:{videoList:function(){return this.$store.state.videoes.files},videoURL:function(){return this.$store.state.videoes.fileURL},language:function(){return this.$store.state.manager.language},languages:function(){return this.$LANGUAGES_KO},req_lang:function(){return this.languages[this.req]},grant_lang:function(){return this.languages[this.grant]},req_code:function(){return this.$LANG_CODE[this.req]},grant_code:function(){return this.$LANG_CODE[this.grant]},trackMode:function(){switch(this.fileTab){case 1:return"srt";case 2:return"vtt";default:return"NotFoundMode"}}},watch:{fileTab:function(e){1===e?(this.$refs.tab_1.style.border="0",this.$refs.tab_1.style.backgroundColor="#2172FF",this.$refs.tab_1.style.opacity="1",this.$refs.tab_2.style.border="3px dashed grey",this.$refs.tab_2.style.backgroundColor="#FFFFFF",this.$refs.tab_2.style.opacity="0.6"):2===e?(this.$refs.tab_1.style.border="3px dashed grey",this.$refs.tab_1.style.backgroundColor="#FFFFFF",this.$refs.tab_1.style.opacity="0.6",this.$refs.tab_2.style.border="0",this.$refs.tab_2.style.backgroundColor="#2172FF",this.$refs.tab_2.style.opacity="1"):(this.$refs.tab_1.style.border="3px dashed grey",this.$refs.tab_1.style.backgroundColor="#FFFFFF",this.$refs.tab_1.style.opacity="0.6",this.$refs.tab_2.style.border="3px dashed grey",this.$refs.tab_2.style.backgroundColor="#FFFFFF",this.$refs.tab_2.style.opacity="0.6")},textTab:function(e){1===e?(this.$refs.textTab_1.style.border="0",this.$refs.textTab_1.style.backgroundColor="#2172FF",this.$refs.textTab_1.style.opacity="1",this.$refs.textTab_2.style.border="3px dashed grey",this.$refs.textTab_2.style.backgroundColor="#FFFFFF",this.$refs.textTab_2.style.opacity="0.6"):2===e?(this.$refs.textTab_1.style.border="3px dashed grey",this.$refs.textTab_1.style.backgroundColor="#FFFFFF",this.$refs.textTab_1.style.opacity="0.6",this.$refs.textTab_2.style.border="0",this.$refs.textTab_2.style.backgroundColor="#2172FF",this.$refs.textTab_2.style.opacity="1"):(this.$refs.textTab_1.style.border="3px dashed grey",this.$refs.textTab_1.style.backgroundColor="#FFFFFF",this.$refs.textTab_1.style.opacity="0.6",this.$refs.textTab_2.style.border="3px dashed grey",this.$refs.textTab_2.style.backgroundColor="#FFFFFF",this.$refs.textTab_2.style.opacity="0.6")}},methods:{isEmpty:function(e){return e.constructor===Object&&0===Object.keys(e).length},timeToSec:function(time){var e=0;if(/(((\d\d:\d\d)|(\d\d)):\d\d.\d\d\d)/gm.test(time)){var t=time.split(":").reverse();return 3===t.length?(e+=parseFloat(parseFloat(t[0]).toFixed(2)),e+=60*parseInt(t[1]),e+=3600*parseInt(t[2])):2===t.length&&(e+=parseFloat(parseFloat(t[0]).toFixed(2)),e+=60*parseInt(t[1])),e}return"time 형식 부정확"},uploadVideo:function(){if(this.selectVideo){this.newVideo();var e=this.selectFilename;this.$store.commit("videoes/setFileName",e.substring(0,e.lastIndexOf(".")));var t=e.substring(e.lastIndexOf(".")+1);this.$store.commit("videoes/setFileExt",t),this.$store.commit("videoes/setFileURL","https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/videoes/".concat(encodeURI(e))),this.step=2,this.newVideoDialog=!1,this.dialog=!0}else this.newVideoDialog=!1,this.$refs.upload.click()},extToContentType:function(e){switch(e){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":case"ogv":case"ogm":return"video/ogg";default:return"application/oct-stream"}},loadingLogic:function(e){var t=this;switch(e){case 1:var n=setInterval((function(){t.preSignedUrlResponse?(t.loading<16&&(t.loading=16),clearInterval(n)):t.loading<15&&t.loading++}),1500);break;case 2:var r=setInterval((function(){t.uploadResponse?(t.loading<33&&(t.loading=33),t.step=2,clearInterval(r)):t.loading<32&&t.loading++}),1500);break;case 3:var o=setInterval((function(){t.trackCompleteResponse?(t.loading<66&&(t.loading=66),t.step=3,clearInterval(o)):t.loading<65&&t.loading++}),2500);break;case 4:var c=setInterval((function(){0===t.transTrack.length?t.loading<99&&t.loading++:(t.loading<100&&(t.loading=100),t.dialog=!1,clearInterval(c),t.loading=0)}),2e3);break;default:console.log("step 종료")}},trackOn:function(e){var t=this;return Object(j.a)(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$nextTick();case 2:for(t.video=t.$refs.videoplayer,t.cueTrack=t.video.addTextTrack("subtitles",t.req_lang,t.req_code),t.transCueTrack=t.video.addTextTrack("subtitles",t.grant_lang,t.grant_code),t.cueTrack.mode="showing",t.transCueTrack.mode="showing",i=0;i<t.fullTrack.length;i++)t.cueTrack.addCue(new VTTCue(t.timeToSec(t.timeLine[i].start),t.timeToSec(t.timeLine[i].end),t.originalTrack[i]));for(n=0;n<t.fullTrack.length;n++)t.transCueTrack.addCue(new VTTCue(t.timeToSec(t.timeLine[n].start),t.timeToSec(t.timeLine[n].end),t.transTrack[n]));case 9:case"end":return e.stop()}}),e)})))()},sliceName:function(e,t){return e.substring(e.lastIndexOf(t)+1)},sliceFrontName:function(e,t){return e.substring(0,e.lastIndexOf(t))},trackMerge:function(){for(var e=[],i=0;i<Math.max(this.timeLine.length,this.originalTrack.length);i++)e[i]=U(U({},this.timeLine[i]),{text:this.originalTrack[i]});this.fullTrack=e},trackFormating:function(e,track){if("srt"===e){for(var t="",i=0;i<Math.min(this.fullTrack.length,track.length);i++)t+="".concat(i+1,"\n").concat(this.fullTrack[i].start.replace(".",",")," --\x3e ").concat(this.fullTrack[i].end.replace(".",","),"\n").concat(track[i],"\n\n");return t}for(var n="WEBVTT\n\n",r=0;r<Math.min(this.fullTrack.length,track.length);r++)n+="".concat(this.fullTrack[r].start," --\x3e ").concat(this.fullTrack[r].end,"\n").concat(track[r],"\n\n");return n},onSelectFile:function(e){var t=this;return Object(j.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.selectVideo=!0,t.selectFilename=e,t.readToVideo){n.next=14;break}return n.next=5,t.$store.commit("videoes/setFileName",e.substring(0,e.lastIndexOf(".")));case 5:return r=e.substring(e.lastIndexOf(".")+1),n.next=8,t.$store.commit("videoes/setFileExt",r);case 8:return n.next=10,t.$store.commit("videoes/setFileURL","https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/videoes/".concat(encodeURI(e)));case 10:t.step=2,t.dialog=!0,n.next=15;break;case 14:t.newVideoDialog=!0;case 15:case"end":return n.stop()}}),n)})))()},onChange:function(e){var t=this;return Object(j.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{null!=e&&0!=e.target.files.length?(t.newVideo(),t.file=e.target.files[0],t.dialog=!0):console.log("e is null")}catch(e){console.log(e)}case 1:case"end":return n.stop()}}),n)})))()},onTaskStart:function(){var e=this;return Object(j.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,d,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.beforeSelect=!1,e.originalTrack="",e.transTrack="",e.selectVideo){t.next=57;break}return n=e.file.name,r=new FormData,o=n.substring(0,n.lastIndexOf(".")),c=n.substring(n.lastIndexOf(".")+1),e.$store.commit("videoes/setFileName",o),e.$store.commit("videoes/setFileExt",c),r.append("fileKey",e.file),t.prev=11,e.loadingLogic(1),t.next=15,e.$store.dispatch("videoes/signedURL",r);case 15:return l=t.sent,e.preSignedUrlResponse=!0,e.loadingLogic(2),t.next=20,E.a.put(l,e.file,{headers:{"Content-Type":e.extToContentType(c)}});case 20:if(200!==t.sent.status){t.next=49;break}return e.loadingLogic(3),e.uploadResponse=!0,t.next=26,e.$store.commit("videoes/setFile",void 0);case 26:return t.next=28,e.$store.dispatch("videoes/setURL");case 28:return t.next=30,e.$store.dispatch("videoes/postVideo");case 30:return d=t.sent,e.trackCompleteResponse=!0,e.track=d.track,e.originalTrack=d.segment,e.timeLine=d.timeline,e.trackMerge(),e.$store.dispatch("videoes/getFiles"),e.loadingLogic(4),t.next=40,e.$store.dispatch("videoes/transTrack",{from:e.req_code,to:e.grant_code,track:e.fullTrack});case 40:e.transTrack=t.sent,e.trans=e.trackFormating("vtt",e.transTrack),e.readToVideo=!0,e.readyToTrack=!0,e.trackOn(e.req_lang),e.selectFilename=e.$store.state.videoes.fileName,e.dialog=!1,t.next=50;break;case 49:e.$menage.showMessage({message:"영상 업로드에 실패했습니다.\n관리자에게 문의하세요.",color:"error"});case 50:t.next=55;break;case 52:t.prev=52,t.t0=t.catch(11),console.log(t.t0);case 55:t.next=85;break;case 57:return t.prev=57,e.loading=33,e.loadingLogic(3),e.uploadResponse=!0,t.next=63,e.$store.dispatch("videoes/setURL");case 63:return t.next=65,e.$store.dispatch("videoes/postVideo");case 65:return _=t.sent,e.trackCompleteResponse=!0,e.track=_.track,e.originalTrack=_.segment,e.timeLine=_.timeline,e.trackMerge(),e.loadingLogic(4),t.next=74,e.$store.dispatch("videoes/transTrack",{from:e.req_code,to:e.grant_code,track:e.fullTrack});case 74:e.transTrack=t.sent,e.readToVideo=!0,e.readyToTrack=!0,e.trackOn(e.req_lang),e.dialog=!1,e.selectVideo=!1,t.next=85;break;case 82:t.prev=82,t.t1=t.catch(57),console.log(t.t1);case 85:case"end":return t.stop()}}),t,null,[[11,52],[57,82]])})))()},newVideo:function(){this.newVideoDialog=!1,this.readToVideo=!1,this.readyToTrack=!1,this.file={},this.fullTrack=[],this.timeLine=[],this.originalTrack=[],this.transTrack=[],this.track="",this.trans="",this.loading=0,this.dialog=!1,this.beforeSelect=!0,this.step=1,this.preSignedUrlResponse=!1,this.uploadResponse=!1,this.trackCompleteResponse=!1},downloadDialogOpen:function(){this.fileTab=0,this.textTab=0,this.downloadDialog=!this.downloadDialog},downloadFile:function(){var e=this;return Object(j.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.trackFormating(e.trackMode,1===e.textTab?e.originalTrack:e.transTrack);case 2:return n=t.sent,t.next=5,e.$store.dispatch("videoes/textToTrack",{track:n,ext:e.trackMode});case 5:e.$refs.download.$el.click(),e.downloadDialogOpen();case 7:case"end":return t.stop()}}),t)})))()},firstTap:function(){this.fileTab=1},secondTap:function(){this.fileTab=2},firstTextTap:function(){this.textTab=1},secondTextTap:function(){this.textTab=2},deleteFile:function(e){var t=this.sliceName(e.Key,"/");this.$store.commit("videoes/setFileName",t.substring(0,t.lastIndexOf("."))),this.$store.commit("videoes/setFileExt",t.substring(t.lastIndexOf(".")+1)),this.deleteFileDialog=!0},deleteFileOK:function(){var e=this;return Object(j.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.$nuxt.$loading.start(),t.next=4,e.$store.dispatch("videoes/deleteFile");case 4:e.$nuxt.$loading.finish(),e.$store.commit("videoes/setFileName",""),e.$store.commit("videoes/setFileExt",""),e.deleteFileDialog=!1,t.next=15;break;case 10:t.prev=10,t.t0=t.catch(0),e.$nuxt.$loading.finish(),e.deleteFileDialog=!1,console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,10]])})))()},deleteFileNO:function(){this.$store.commit("videoes/setFileName",""),this.$store.commit("videoes/setFileExt",""),this.deleteFileDialog=!1}}},z=P,A=(n(626),Object(V.a)(z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"video__box"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"upload",attrs:{type:"file",accept:".mp4"},on:{change:e.onChange}}),e._v(" "),!0===e.readToVideo?n("div",{staticClass:"video__player"},[n("video",{ref:"videoplayer",staticClass:"player",attrs:{src:e.videoURL,controls:"",preload:"auto"}})]):n("div",{staticClass:"video__player"},[n(l.a,{attrs:{width:"60vw",persistent:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.attrs;return[n(r.a,e._b({attrs:{rounded:""},on:{click:e.uploadVideo}},"v-btn",o,!1),[n(h.a,[e._v("\n                            mdi-plus\n                        ")]),e._v("\n                        새로 만들기\n                    ")],1)]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n(o.a,[n("div",{staticClass:"dialog__box"},[n("div",{staticClass:"dialog__box__setting"},[n("div",{staticClass:"setting__select__box",on:{click:function(t){e.dialog=!e.dialog}}},[n(m.a,{staticClass:"img",attrs:{src:"https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/images/logo.png"}})],1),e._v(" "),e.beforeSelect?n("div",{staticClass:"setting__select__box"},[n("div",{staticClass:"select__box"},[n("div",[n($.a,{staticClass:"header__class",attrs:{elevation:"0"}},[n(F.b,{staticClass:"font-weight-bold"},[e._v("\n                                                영상의 원본 언어\n                                            ")])],1),e._v(" "),n("div",{staticClass:"overflow-y-auto list__wrapper"},[n(x.a,[n(w.a,{attrs:{mandatory:""},model:{value:e.req,callback:function(t){e.req=t},expression:"req"}},e._l(e.languages,(function(t,r){return n(k.a,{key:r,attrs:{"active-class":"list__select"}},[n(T.c,[e._v("\n                                                            "+e._s(t)+"\n                                                        ")])],1)})),1)],1)],1)],1),e._v(" "),n(h.a,[e._v("\n                                        mdi-arrow-right\n                                    ")]),e._v(" "),n("div",[n($.a,{staticClass:"header__class",attrs:{elevation:"0"}},[n(F.b,{staticClass:"font-weight-bold"},[e._v("\n                                                번역하고 싶은 언어\n                                            ")])],1),e._v(" "),n("div",{staticClass:"overflow-y-auto list__wrapper"},[n(x.a,[n(w.a,{attrs:{mandatory:""},model:{value:e.grant,callback:function(t){e.grant=t},expression:"grant"}},e._l(e.languages,(function(t,r){return n(k.a,{key:r,attrs:{"active-class":"list__select"}},[n(T.c,[e._v("\n                                                            "+e._s(t)+"\n                                                        ")])],1)})),1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"action__box"},[n(r.a,{attrs:{block:"",rounded:"",color:"#013183",dark:""},on:{click:e.onTaskStart}},[e._v("\n                                        번역하기\n                                    ")])],1)]):n("div",{staticClass:"dialog__box__process"},[n("div",{staticClass:"process__stepper"},[n("div",{staticClass:"stepper"},[n(r.a,{staticClass:"stepper__btn",attrs:{block:"",rounded:"",color:"primary",disabled:1!=e.step}},[e._v("\n                                            영상 업로드\n                                        ")])],1),e._v(" "),1===e.step?n("transition",[n("div",{staticClass:"arrow__wrapper"},[n("div",{staticClass:"arrow"},[e._v("▼")]),e._v(" "),n("div",{staticClass:"arrow"},[e._v("▼")]),e._v(" "),n("div",{staticClass:"arrow"},[e._v("▼")])])]):n("div",{staticClass:"arrow__wrapper"},[n("div",[e._v("▼")]),e._v(" "),n("div",[e._v("▼")]),e._v(" "),n("div",[e._v("▼")])]),e._v(" "),n("div",{staticClass:"stepper",attrs:{div:""}},[n(r.a,{staticClass:"stepper__btn",attrs:{block:"",rounded:"",color:"warning",disabled:2!=e.step}},[e._v("\n                                            영상 인식\n                                        ")])],1),e._v(" "),2===e.step?n("transition",[n("div",{staticClass:"arrow__wrapper"},[n("div",{staticClass:"arrow"},[e._v("▼")]),e._v(" "),n("div",{staticClass:"arrow"},[e._v("▼")]),e._v(" "),n("div",{staticClass:"arrow"},[e._v("▼")])])]):n("div",{staticClass:"arrow__wrapper"},[n("div",[e._v("▼")]),e._v(" "),n("div",[e._v("▼")]),e._v(" "),n("div",[e._v("▼")])]),e._v(" "),n("div",{staticClass:"stepper",attrs:{div:""}},[n(r.a,{staticClass:"stepper__btn",attrs:{block:"",rounded:"",color:"success",disabled:3!=e.step}},[e._v("\n                                            자막 번역\n                                        ")])],1)],1)])]),e._v(" "),n("div",{staticClass:"dialog__box__loading"},[n(y.a,{attrs:{color:"#013183",height:"25px"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.value;return[n("strong",{staticStyle:{color:"white"}},[e._v(e._s(Math.ceil(r))+"%")])]}}]),model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}})],1)])])],1)],1),e._v(" "),n("div",{staticClass:"video__action"},[n(r.a,{staticClass:"video__action__btn",attrs:{rounded:"",color:"#013183",dark:e.readToVideo,disabled:!e.readToVideo},on:{click:function(t){t.stopPropagation(),e.newVideoDialog=!e.newVideoDialog}}},[n(h.a,[e._v("\n                    mdi-plus\n                ")]),e._v("\n                새 영상\n            ")],1),e._v(" "),n(r.a,{staticClass:"video__action__btn",attrs:{rounded:"",color:"#013183",dark:e.readToVideo,disabled:!e.readToVideo},on:{click:function(t){return t.stopPropagation(),e.downloadDialogOpen.apply(null,arguments)}}},[n(h.a,[e._v("\n                    mdi-download\n                ")]),e._v("\n                다운로드\n            ")],1)],1),e._v(" "),n(l.a,{attrs:{width:"600",persistent:""},model:{value:e.downloadDialog,callback:function(t){e.downloadDialog=t},expression:"downloadDialog"}},[n(o.a,{staticClass:"download__card"},[n(c.d,{staticClass:"download__card__title",attrs:{tag:"div"}},[e._v("\n                    다운로드 양식 선택\n                ")]),e._v(" "),n("div",{staticClass:"download__card__content"},[n("div",{staticClass:"hr-sect"},[e._v("텍스트 정보")]),e._v(" "),n("div",{staticClass:"card__content__text pa-2"},[n("div",{ref:"textTab_1",staticClass:"card__content__btn pa-4",on:{click:e.firstTextTap}},[n("div",{staticClass:"d-flex align-center justify-center",staticStyle:{width:"100%",height:"50%"}},[n(h.a,{staticClass:"text-h4",attrs:{dark:1===e.textTab}},[e._v("\n                                    mdi-format-text-variant-outline\n                                ")])],1),e._v("\n                            원문\n                        ")]),e._v(" "),n("div",{ref:"textTab_2",staticClass:"card__content__btn pa-4",on:{click:e.secondTextTap}},[n("div",{staticClass:"d-flex align-center justify-center",staticStyle:{width:"100%",height:"50%"}},[n(h.a,{staticClass:"text-h4",attrs:{dark:2===e.textTab}},[e._v("\n                                    mdi-translate-variant\n                                ")])],1),e._v("\n                            번역\n                        ")])]),e._v(" "),n("div",{staticClass:"hr-sect"},[e._v("파일 포맷")]),e._v(" "),n("div",{staticClass:"card__content__btngroup"},[n("div",{ref:"tab_1",staticClass:"card__content__btn pa-4",on:{click:e.firstTap}},[n("div",{staticClass:"d-flex align-center justify-center",staticStyle:{width:"100%",height:"80%"}},[n(h.a,{staticClass:"text-h1",attrs:{dark:1===e.fileTab}},[e._v("\n                                    mdi-file\n                                ")])],1),e._v(" "),n(r.a,{staticClass:"non-flex readonly__btn font-weight-bold",staticStyle:{width:"100%",height:"20%","font-size":"18px"},attrs:{ripple:!1,depressed:"",rounded:"",block:""}},[e._v("\n                                .srt\n                            ")])],1),e._v(" "),n("div",{ref:"tab_2",staticClass:"card__content__btn pa-4",on:{click:e.secondTap}},[n("div",{staticClass:"d-flex align-center justify-center",staticStyle:{width:"100%",height:"80%"}},[n(h.a,{staticClass:"text-h1",attrs:{dark:2===e.fileTab}},[e._v("\n                                    mdi-file\n                                ")])],1),e._v(" "),n(r.a,{staticClass:"non-flex readonly__btn font-weight-bold",staticStyle:{width:"100%",height:"20%","font-size":"18px"},attrs:{ripple:!1,depressed:"",rounded:"",block:""}},[e._v("\n                                .vtt\n                            ")])],1)])]),e._v(" "),n(c.a,{staticClass:"card__action"},[n(r.a,{staticClass:"auto-flex",attrs:{depressed:"",color:"success",disabled:0===e.fileTab||0===e.textTab},on:{click:function(t){return t.stopPropagation(),e.downloadFile.apply(null,arguments)}}},[n(h.a,[e._v("\n                            mdi-download\n                        ")]),e._v("\n                        다운로드\n                    ")],1),e._v(" "),n(r.a,{staticClass:"auto-flex",attrs:{depressed:"",color:"error"},on:{click:function(t){t.stopPropagation(),e.downloadDialog=!e.downloadDialog}}},[n(h.a,[e._v("\n                            mdi-close\n                        ")]),e._v("\n                        닫기\n                    ")],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"video__list"},[n(f.a,{staticClass:"video__list__group",attrs:{tile:"",dark:""}},[n(d.a,[n(v.a,{attrs:{color:"#013183"}},[e._v("\n                        파일 목록\n                    ")]),e._v(" "),e.loginState?n(_.a,{staticClass:"video__list__content"},[n("div",{staticClass:"list__content__disabled"},[e._v("\n                            로그인 후"),n("br"),e._v(" 이용가능 합니다.\n                        ")])]):n(_.a,{staticClass:"video__list__content"},[n(O.a,{attrs:{bench:"10",items:e.videoList,height:"50vh","item-height":"64"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.item;return[n(k.a,[n(T.c,{staticClass:"content__list__title"},[n(r.a,{staticClass:"content__list__btn",attrs:{"x-large":"",depressed:""},on:{click:function(t){t.stopPropagation(),e.onSelectFile(e.sliceName(o.Key,"/"))}}},[n(h.a,[e._v("\n                                                mdi-file-video\n                                            ")]),e._v(" "),n("div",{staticClass:"list__btn__label"},[e._v("\n                                                "+e._s(e.sliceName(o.Key,"/"))+"\n                                            ")]),e._v(" "),n(C.a),e._v(" "),n(r.a,{attrs:{icon:"",right:""},on:{click:function(t){return t.stopPropagation(),e.deleteFile(o)}}},[n(h.a,[e._v("\n                                                    mdi-close\n                                                ")])],1)],1)],1)],1)]}}])})],1)],1)],1)],1)],1),e._v(" "),n(l.a,{attrs:{width:"250"},model:{value:e.deleteFileDialog,callback:function(t){e.deleteFileDialog=t},expression:"deleteFileDialog"}},[n(o.a,[n(c.d,[n("h5",[e._v("정말 "),n("span",{staticStyle:{"font-weight":"bold",color:"red"}},[e._v("삭제")]),e._v("하시겠습니까?")])]),e._v(" "),n(c.c,[e._v("\n                파일을 "),n("span",{staticStyle:{"font-weight":"bold"}},[e._v("삭제")]),e._v("하는 경우, "),n("br"),e._v("\n                삭제한 파일을 복구할 수 "),n("span",{staticStyle:{color:"red"}},[e._v("없습니다.")])]),e._v(" "),n(c.a,[n(C.a),e._v(" "),n(r.a,{attrs:{text:""},on:{click:e.deleteFileOK}},[e._v("예")]),e._v(" "),n(r.a,{attrs:{text:""},on:{click:e.deleteFileNO}},[e._v("아니오")])],1)],1)],1),e._v(" "),n(l.a,{attrs:{width:"250"},model:{value:e.newVideoDialog,callback:function(t){e.newVideoDialog=t},expression:"newVideoDialog"}},[n(o.a,[n(c.d,[n("h5",[e._v("정말 가져오시겠습니까?")])]),e._v(" "),n(c.c,[n("span",{staticStyle:{"font-weight":"bold"}},[e._v("수정하는 중")]),e._v("에 가져오는 경우, "),n("br"),e._v("\n                수정한 내용이 "),n("span",{staticStyle:{color:"red"}},[e._v("모두 사라집니다.")])]),e._v(" "),n(c.a,[n(C.a),e._v(" "),n(r.a,{attrs:{text:""},on:{click:e.uploadVideo}},[e._v("예")]),e._v(" "),n(r.a,{attrs:{text:""},on:{click:function(t){e.newVideoDialog=!1}}},[e._v("아니오")])],1)],1)],1),e._v(" "),n("div",{ref:"trackBox",staticClass:"track__box"},[e.readyToTrack?n(O.a,{ref:"trackscroll",staticClass:"track__box__scroll",attrs:{bench:"15",items:e.fullTrack,height:e.virtualHeight,"item-height":"160"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.item,o=t.index;return[n("div",{staticClass:"track__box__wrapper"},[n("track-component",{attrs:{start:r.start,end:r.end,text:r.text,trans:e.transTrack[o],idx:o}})],1)]}}],null,!1,3315004982)}):n("div",[e._v("\n            영상을 추가하면 자막을 편집하실 수 있습니다. "),n("br")])],1),e._v(" "),n(r.a,{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"download",attrs:{href:(e.isDev?"http://localhost:3085":"https://api.dmtlabs.kr")+"/video/download/"+e.sliceFrontName(e.selectFilename,".")+"."+e.trackMode}})],1)}),[],!1,null,"e4e8ee3a",null));t.default=A.exports}}]);