(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{495:function(e,t,n){var content=n(503);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("706a0d76",content,!0,{sourceMap:!1})},502:function(e,t,n){"use strict";n(495)},503:function(e,t,n){var o=n(9)(!1);o.push([e.i,".video__box[data-v-066f6fd4]{max-width:920px}.video__player[data-v-066f6fd4]{width:100%}",""]),e.exports=o},505:function(e,t,n){"use strict";var o={props:{url:{type:String,default:""}},data:function(){return{video:"",tracks:[]}},computed:{temp:function(){return"https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/tracks/".concat(encodeURI(this.$store.state.videoes.fileName),".vtt")}},mounted:function(){this.video=document.querySelector("video"),this.tracks=this.video.textTracks},methods:{}},r=(n(502),n(18)),component=Object(r.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video__box"},[n("video",{staticClass:"video__player",attrs:{controls:"",preload:"auto",src:e.url,crossorigin:"use-credentials"}},[n("track",{attrs:{kind:"subtitles",src:e.temp,srclang:"en",label:"영어",default:""}})])])}),[],!1,null,"066f6fd4",null);t.a=component.exports},522:function(e,t,n){var content=n(590);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("9b25f63a",content,!0,{sourceMap:!1})},523:function(e,t,n){var content=n(592);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("a070c388",content,!0,{sourceMap:!1})},589:function(e,t,n){"use strict";n(522)},590:function(e,t,n){var o=n(9)(!1);o.push([e.i,".track__wrapper[data-v-4478e97e]{display:flex;flex-direction:column;height:15%;border:1px solid grey;margin:5px;padding:0 10px;flex-basis:6rem;justify-content:center}.track__time[data-v-4478e97e]{display:flex;padding:5px}.input__time[data-v-4478e97e]{width:200px}.track__text[data-v-4478e97e]{display:flex;flex-direction:column;justify-content:center;padding:0 5px;margin:5px;border:1px solid #000}",""]),e.exports=o},591:function(e,t,n){"use strict";n(523)},592:function(e,t,n){var o=n(9)(!1);o.push([e.i,".video__box[data-v-27505ecc]{overflow:scroll;height:calc(100% - 12px)}.video__box[data-v-27505ecc]::-webkit-scrollbar{display:block;width:10px;height:8px}.video__box[data-v-27505ecc]::-webkit-scrollbar-track{background-color:transparent}.video__box[data-v-27505ecc]::-webkit-scrollbar-thumb{border-radius:5px;background:#2172ff}.video__player[data-v-27505ecc]{width:auto;height:50%;min-height:625px;border:1px solid red}.video__player__grid[data-v-27505ecc]{height:100%;min-height:625px}.video__player__box[data-v-27505ecc],.video__player__meta[data-v-27505ecc]{display:flex;align-items:center;justify-content:center;margin:25px 15px}.video__player__meta[data-v-27505ecc],.video__translator[data-v-27505ecc]{flex-direction:column}.video__translator[data-v-27505ecc]{display:flex;min-height:calc(50% - 128px);border:1px solid red}.video__translator__title[data-v-27505ecc]{display:flex;align-items:center;margin:15px;padding:0 15px}.video__translator__content[data-v-27505ecc]{display:flex;flex-direction:column;margin:0 15px 15px;border:1px solid red}.video__uploadFile[data-v-27505ecc]{width:100%;padding:0 50px}.video[data-v-27505ecc]{padding:25px}",""]),e.exports=o},615:function(e,t,n){"use strict";n.r(t);var o=n(460),r=n(488),c=n(512),d=n(188),l=n(487),v=n(469),_=n(6),f=(n(44),n(23),n(505)),x=n(457),m=(n(60),{props:{start:{type:String,default:"00:00:00.000"},end:{type:String,default:"00:00:00.000"},text:{type:String,default:""}},data:function(){return{}},computed:{segmentStart:function(){return this.msToString(this.start)},segmentEnd:function(){return this.msToString(this.end)},segmentText:function(){return this.text.split("\\n")}},methods:{msToString:function(time){if(0===time)return"00:00:00.000";var e=time/36e5>=1?parseInt(time/36e5):0,t=time/6e4>=1?time/6e4>=60?parseInt(time/6e4)-60>=1?parseInt(time/6e4)-60:0:parseInt(time/6e4):0,n=time%6e4>=1?parseInt(time%6e4/1e3)>=1?parseInt(time%6e4/1e3):0:parseInt(time/1e3)>=1?parseInt(time/1e3):0,o=time%1e3,r=e/10>=1?e:"0".concat(e),c=t/10>=1?t:"0".concat(t),d=n/10>=1?n:"0".concat(n),l=o/100>=1?o:o/10>=1?"0".concat(o):"00".concat(o);return"".concat(r,":").concat(c,":").concat(d,".").concat(l)}}}),h=(n(589),n(18)),k=Object(h.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"track__wrapper"},[n("div",{staticClass:"track__time"},[n(x.a,{staticClass:"input__time",attrs:{outlined:"",dense:"","hide-details":""},model:{value:e.start,callback:function(t){e.start=t},expression:"start"}}),e._v(" \n        --\x3e \n        "),n("vt-text-field",{staticClass:"input__time",attrs:{outlined:"",dense:""},model:{value:e.end,callback:function(t){e.end=t},expression:"end"}})],1),e._v(" "),n("div",{staticClass:"track__text"},[n("p",[e._l(e.segmentText,(function(t,o){return[e._v("\n                "+e._s(t)+" "),n("br",{key:o})]}))],2)])])}),[],!1,null,"4478e97e",null).exports,y={layout:"VideoLayout",components:{VideoComponent:f.a,TrackComponent:k},data:function(){return{readToVideo:!1,videoTrack:[]}},created:function(){var e=this;this.$nuxt.$on("onVideoEvent",(function(t){e.readToVideo=!0,e.videoTrack=[],e.$store.commit("videoes/setFileURL","https://dmtlabs-files.s3.ap-northeast-2.amazonaws.com/videoes/".concat(encodeURI(t)))})),this.$nuxt.$on("onScrollTop",(function(){e.$refs.videobox.scrollBy({top:-e.$refs.videobox.scrollTop,behavior:"smooth"})}))},computed:{language:function(){return this.$store.state.manager.language},fileURL:function(){return this.$store.state.videoes.fileURL}},methods:{extToContentType:function(e){switch(e){case"mp4":return"video/mp4";case"webm":return"video/webm";case"ogg":case"ogv":case"ogm":return"video/ogg";default:return"application/oct-stream"}},onChange:function(e){var t=this;return Object(_.a)(regeneratorRuntime.mark((function n(){var o,r,c,d,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=new FormData,null==e){n.next=29;break}return n.prev=2,r=e.name.substring(e.name.lastIndexOf(".")+1),c=e.name.substring(0,e.name.lastIndexOf(".")),t.$store.commit("videoes/setFileName",c),o.append("fileKey",e),n.next=9,t.$store.dispatch("videoes/signedURL",o);case 9:return d=n.sent,t.$nuxt.$loading.start(),n.next=13,fetch(new Request(d,{method:"PUT",headers:{"Content-Type":t.extToContentType(r)},body:e}));case 13:if(l=n.sent,t.$nuxt.$loading.finish(),200!==l.status){n.next=20;break}t.$store.dispatch("videoes/setURL").then((function(){t.readToVideo=!0,t.$store.dispatch("videoes/getFiles")})),console.log("Upload Success"),n.next=22;break;case 20:return console.log("Upload Error"),n.abrupt("return");case 22:n.next=27;break;case 24:n.prev=24,n.t0=n.catch(2),console.log(n.t0);case 27:n.next=30;break;case 29:console.log("e is null");case 30:case"end":return n.stop()}}),n,null,[[2,24]])})))()},getTrack:function(){var e=this;return Object(_.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$store.dispatch("videoes/loadTrack");case 3:n=t.sent,e.videoTrack=n.segment,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},onEmptyFile:function(){this.readToVideo=!this.readToVideo,this.videoTrack=[]},onClearFile:function(){this.$store.dispatch("videoes/deleteFile"),this.$store.commit("videoes/setFileURL",""),this.$refs.fileupload.internalValue=null,this.readToVideo=!1}}},T=(n(591),Object(h.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"videobox",staticClass:"video__box"},[n("div",[n(c.a,{ref:"fileupload",attrs:{label:"업로드 영상"},on:{change:function(t){return e.onChange(t)}}})],1),e._v(" "),n("div",{staticClass:"video__player"},[n(l.a,{staticClass:"video__player__grid",attrs:{"no-gutters":""}},[n(r.a,{staticClass:"video__player__box",attrs:{cols:"8"}},[0!=this.readToVideo?n("div",{staticClass:"video"},[n("video-component",{attrs:{url:this.fileURL}})],1):n("div",[e._v("\n                    비어있음\n                ")])]),e._v(" "),n(r.a,{staticClass:"video__player__meta"},[n(o.a,{attrs:{color:"warning",elevation:"0",block:"",disabled:!this.readToVideo},on:{click:e.onEmptyFile}},[n(d.a,[e._v("\n                        mdi-trash-can\n                    ")]),e._v("\n                    영상 비우기\n                ")],1),e._v(" "),n(o.a,{attrs:{color:"error",elevation:"0",block:"",disabled:!this.readToVideo},on:{click:e.onClearFile}},[n(d.a,[e._v("\n                        mdi-close\n                    ")]),e._v("\n                    영상 삭제\n                ")],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"video__translator"},[n("div",{staticClass:"video__translator__title"},[n("h1",[e._v("자막")]),e._v(" "),n(v.a),e._v(" "),n(o.a,{attrs:{color:"#013183",depressed:"",tile:"",dark:"",disabled:!this.readToVideo},on:{click:e.getTrack}},[e._v("자막 가져오기")])],1),e._v(" "),e._l(e.videoTrack,(function(tr,e){return n("div",{key:e,staticClass:"video__translator__content"},[n("track-component",{attrs:{start:tr.start,end:tr.end,text:tr.text}})],1)}))],2)])}),[],!1,null,"27505ecc",null));t.default=T.exports}}]);